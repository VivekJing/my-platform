function module(t,n,e){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=t("../core/renderer"),a=t("../core/utils/window").getWindow(),r=t("../events/core/events_engine"),s=t("../core/errors"),f=t("../core/utils/dom").getPublicElement,c=t("../core/utils/extend").extend,u=t("../core/utils/type"),m=t("../core/utils/iterator"),l=t("./translator"),p=t("./easing"),d=t("./frame"),h=t("../core/utils/support"),y=t("./position"),v=t("../core/remove_event"),g=t("../events/utils"),A=t("../core/utils/deferred"),_=A.when,T=A.Deferred,w=g.addNamespace(v,"dxFX"),b=u.isFunction,S=u.isPlainObject,x=t("../core/utils/common").noop,C=/^([+-])=(.*)/i,F="dxAnimData",D="dxAnimQueue",E="transform",V={initAnimation:function(t,n){t.css({transitionProperty:"none"}),"string"==typeof n.from?t.addClass(n.from):ct(t,n.from);var e=this,i=new T,o=n.cleanupWhen;n.transitionAnimation={deferred:i,finish:function(){e._finishTransition(t),o?_(i,o).always((function(){e._cleanup(t,n)})):e._cleanup(t,n),i.resolveWith(t,[n,t])}},this._completeAnimationCallback(t,n).done((function(){n.transitionAnimation.finish()})).fail((function(){i.rejectWith(t,[n,t])})),n.duration||n.transitionAnimation.finish(),t.css("transform")},animate:function(t,n){return this._startAnimation(t,n),n.transitionAnimation.deferred.promise()},_completeAnimationCallback:function(t,n){var e,i,o=this,a=Date.now()+n.delay,s=new T,f=new T,c=new T,u=h.transitionEndEventName()+".dxFX";return n.transitionAnimation.cleanup=function(){clearTimeout(e),clearTimeout(i),r.off(t,u),r.off(t,w)},r.one(t,u,(function(){Date.now()-a>=n.duration&&f.reject()})),r.off(t,w),r.on(t,w,(function(){o.stop(t,n),s.reject()})),i=setTimeout((function(){e=setTimeout((function(){c.reject()}),n.duration+n.delay+mt._simulatedTransitionEndDelay),_(f,c).fail(function(){s.resolve()}.bind(this))})),s.promise()},_startAnimation:function(t,n){t.css({transitionProperty:"all",transitionDelay:n.delay+"ms",transitionDuration:n.duration+"ms",transitionTimingFunction:n.easing}),"string"==typeof n.to?t[0].className+=" "+n.to:n.to&&ct(t,n.to)},_finishTransition:function(t){t.css("transition","none")},_cleanup:function(t,n){n.transitionAnimation.cleanup(),"string"==typeof n.from&&(t.removeClass(n.from),t.removeClass(n.to))},stop:function(t,n,e){n&&(e?n.transitionAnimation.finish():(S(n.to)&&m.each(n.to,(function(n){t.css(n,t.css(n))})),this._finishTransition(t),this._cleanup(t,n)))}},j={initAnimation:function(t,n){ct(t,n.from)},animate:function(t,n){var e=new T,i=this;return n?(m.each(n.to,(function(e){void 0===n.from[e]&&(n.from[e]=i._normalizeValue(t.css(e)))})),n.to.transform&&(n.from.transform=i._parseTransform(n.from.transform),n.to.transform=i._parseTransform(n.to.transform)),n.frameAnimation={to:n.to,from:n.from,currentValue:n.from,easing:p.convertTransitionTimingFuncToEasing(n.easing),duration:n.duration,startTime:(new Date).valueOf(),finish:function(){this.currentValue=this.to,this.draw(),d.cancelAnimationFrame(n.frameAnimation.animationFrameId),e.resolve()},draw:function(){if(n.draw)n.draw(this.currentValue);else{var e=c({},this.currentValue);e.transform&&(e.transform=m.map(e.transform,(function(t,n){return"translate"===n?l.getTranslateCss(t):"scale"===n?"scale("+t+")":"rotate"===n.substr(0,n.length-1)?n+"("+t+"deg)":void 0})).join(" ")),t.css(e)}}},n.delay?(n.frameAnimation.startTime+=n.delay,n.frameAnimation.delayTimeout=setTimeout((function(){i._startAnimation(t,n)}),n.delay)):i._startAnimation(t,n),e.promise()):e.reject().promise()},_startAnimation:function(t,n){r.off(t,w),r.on(t,w,(function(){n.frameAnimation&&d.cancelAnimationFrame(n.frameAnimation.animationFrameId)})),this._animationStep(t,n)},_parseTransform:function(t){var n={};return m.each(t.match(/(\w|\d)+\([^)]*\)\s*/g),(function(t,e){var i=l.parseTranslate(e),o=e.match(/scale\((.+?)\)/),a=e.match(/(rotate.)\((.+)deg\)/);i&&(n.translate=i),o&&o[1]&&(n.scale=parseFloat(o[1])),a&&a[1]&&(n[a[1]]=parseFloat(a[2]))})),n},stop:function(t,n,e){var i=n&&n.frameAnimation;i&&(d.cancelAnimationFrame(i.animationFrameId),clearTimeout(i.delayTimeout),e&&i.finish(),delete n.frameAnimation)},_animationStep:function(t,n){var e=n&&n.frameAnimation;if(e){var i=(new Date).valueOf();if(i>=e.startTime+e.duration)e.finish();else{e.currentValue=this._calcStepValue(e,i-e.startTime),e.draw();var o=this;e.animationFrameId=d.requestAnimationFrame((function(){o._animationStep(t,n)}))}}},_calcStepValue:function(t,n){var e;return function e(o,a){var r=Array.isArray(a)?[]:{},s=function(e){var i=n/t.duration,r=n,s=1*o[e],f=a[e]-o[e],c=t.duration;return p.getEasing(t.easing)(i,r,s,f,c)};return m.each(a,(function(t,n){if("string"==typeof n&&!1===parseFloat(n,10))return!0;r[t]="object"===(void 0===n?"undefined":i(n))?e(o[t],n):s(t)})),r}(t.from,t.to)},_normalizeValue:function(t){var n=parseFloat(t,10);return!1===n?t:n}},I={initAnimation:function(){},animate:function(){return(new T).resolve().promise()},stop:x,isSynchronous:!0},N=function(t){t=t||{};var n={transition:h.transition()?V:j,frame:j,noAnimation:I},e=t.strategy||"transition";return"css"!==t.type||h.transition()||(e="noAnimation"),n[e]},O=function(t,n,e,i){m.each(["from","to"],(function(){if(!e(t[this]))throw s.Error("E0010",n,this,i)}))},P=function(t,n){return O(t,n,(function(t){return S(t)}),"a plain object")},W=function(t,n){return O(t,n,(function(t){return"string"==typeof t}),"a string")},k,Q,R={top:{my:"bottom center",at:"top center"},bottom:{my:"top center",at:"bottom center"},right:{my:"left center",at:"right center"},left:{my:"right center",at:"left center"}},U={validateConfig:function(t){P(t,"slide")},setup:function(t,n){var e=l.locate(t);if("slide"!==n.type){var i="slideIn"===n.type?n.from:n.to;i.position=c({of:a},R[n.direction]),ft(t,i)}this._setUpConfig(e,n.from),this._setUpConfig(e,n.to),l.clearCache(t)},_setUpConfig:function(t,n){n.left="left"in n?n.left:"+=0",n.top="top"in n?n.top:"+=0",this._initNewPosition(t,n)},_initNewPosition:function(t,n){var e={left:n.left,top:n.top};delete n.left,delete n.top;var i=this._getRelativeValue(e.left);void 0!==i?e.left=i+t.left:n.left=0,void 0!==(i=this._getRelativeValue(e.top))?e.top=i+t.top:n.top=0,n.transform=l.getTranslateCss({x:e.left,y:e.top})},_getRelativeValue:function(t){var n;if("string"==typeof t&&(n=C.exec(t)))return parseInt(n[1]+"1")*n[2]}},X={setup:function(t,n){var e,i=n.from,o=S(i)?n.skipElementInitialStyles?0:t.css("opacity"):String(i);switch(n.type){case"fadeIn":e=1;break;case"fadeOut":e=0;break;default:e=String(n.to)}n.from={visibility:"visible",opacity:o},n.to={opacity:e}}},z,q={custom:{setup:function(){}},slide:U,slideIn:U,slideOut:U,fade:X,fadeIn:X,fadeOut:X,pop:{validateConfig:function(t){P(t,"pop")},setup:function(t,n){var e=n.from,i=n.to,o="opacity"in e?e.opacity:t.css("opacity"),a="opacity"in i?i.opacity:1,r="scale"in e?e.scale:0,s="scale"in i?i.scale:1;n.from={opacity:o};var f=l.getTranslate(t);n.from.transform=this._getCssTransform(f,r),n.to={opacity:a},n.to.transform=this._getCssTransform(f,s)},_getCssTransform:function(t,n){return l.getTranslateCss(t)+"scale("+n+")"}},css:{validateConfig:function(t){W(t,"css")},setup:function(){}}},L=function(t){var n=q[t.type];if(!n)throw s.Error("E0011",t.type);return n},B={type:"custom",from:{},to:{},duration:400,start:x,complete:x,easing:"ease",delay:0},G={duration:400,easing:"ease",delay:0},H=function(){var t=this,n=this.element,e=this.config;if(ft(n,e.from),ft(n,e.to),this.configurator.setup(n,e),n.data("dxAnimData",this),mt.off&&(e.duration=0,e.delay=0),this.strategy.initAnimation(n,e),e.start){var i=f(n);e.start.apply(this,[i,e])}},J=function(t){var n=t.element,e=t.config;if(n.removeData("dxAnimData"),e.complete){var i=f(n);e.complete.apply(this,[i,e])}t.deferred.resolveWith(this,[n,e])},K=function(){var t=this,n=t.element,e=t.config;return t.isStarted=!0,t.strategy.animate(n,e).done((function(){J(t)})).fail((function(){t.deferred.rejectWith(this,[n,e])}))},M=function(t){var n=this,e=this.element,i=this.config;clearTimeout(this.startTimeout),this.isStarted||this.start(),this.strategy.stop(e,i,t)},Y=g.addNamespace(v,"dxFXStartAnimation"),Z=function(t){r.off(t.element,Y),r.on(t.element,Y,(function(){mt.stop(t.element)})),t.deferred.always((function(){r.off(t.element,Y)}))},$=function(t,n){var e="css"===n.type?G:B,i=c(!0,{},e,n),a=L(i),r=N(i),s={element:o(t),config:i,configurator:a,strategy:r,isSynchronous:r.isSynchronous,setup:H,start:K,stop:M,deferred:new T};return b(a.validateConfig)&&a.validateConfig(i),Z(s),s},tt=function(t,n){var e=o(t);if(!e.length)return(new T).resolve().promise();var i=$(e,n);return nt(e,i),i.deferred.promise()},nt=function(t,n){var e=et(t);it(t,e),e.push(n),at(t)||rt(t,e)},et=function(t){return t.data("dxAnimQueue")||[]},it=function(t,n){t.data("dxAnimQueue",n)},ot=function(t){t.removeData("dxAnimQueue")},at=function(t){return!!t.data("dxAnimData")},rt=function t(n,e){if((e=et(n)).length){var i=e.shift();0===e.length&&ot(n),st(i).done((function(){at(n)||t(n)}))}},st=function(t){return t.setup(),mt.off||t.isSynchronous?t.start():t.startTimeout=setTimeout((function(){t.start()})),t.deferred.promise()},ft=function(t,n){if(n&&n.position){var e=o(a),i=0,r=0,s=y.calculate(t,n.position),f=t.offset(),u=t.position();u.top>f.top&&(r=e.scrollTop()),u.left>f.left&&(i=e.scrollLeft()),c(n,{left:s.h.location-f.left+u.left-i,top:s.v.location-f.top+u.top-r}),delete n.position}},ct=function(t,n){m.each(n,(function(n,e){try{t.css(n,u.isFunction(e)?e():e)}catch(i){}}))},ut=function(t,n){var e=o(t),i=et(e);m.each(i,(function(t,n){n.config.delay=0,n.config.duration=0,n.isSynchronous=!0})),at(e)||rt(e,i);var a=e.data("dxAnimData");a&&a.stop(n),e.removeData("dxAnimData"),ot(e)},mt={off:!1,animationTypes:q,animate:tt,createAnimation:$,isAnimating:at,stop:ut,_simulatedTransitionEndDelay:100};e.exports=mt,e.exports.default=e.exports}

