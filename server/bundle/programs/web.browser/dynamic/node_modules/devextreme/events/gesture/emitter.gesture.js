function module(t,e,i){"use strict";var s=t("../../core/renderer"),n=t("../../events/core/events_engine"),r=t("../../core/devices"),o=t("../../core/utils/style"),a=t("../../core/utils/call_once"),c=t("../../core/utils/dom"),u,h=t("../../core/utils/ready_callbacks").add,l=t("../../core/utils/math"),_=t("../../core/utils/common").noop,v=t("../../core/utils/type").isDefined,m=t("../utils"),d=t("../core/emitter"),g=l.sign,f=Math.abs,p=0,E=1,y=2,T=10,D=0,A=180,B=function(){return o.styleProp("pointer-events")},b=a((function(){var t="dx-gesture-cover",e="generic"===r.real().platform;if(!B()||!e)return _;var i=s("<div>").addClass("dx-gesture-cover").css("pointerEvents","none");return n.subscribeGlobal(i,"dxmousewheel",(function(t){t.preventDefault()})),h((function(){i.appendTo("body")})),function(t,e){i.css("pointerEvents",t?"all":"none"),t&&i.css("cursor",e)}})),x=function(t,e){var i;b()(t,e)},C=d.inherit({gesture:!0,configure:function(t){this.getElement().css("msTouchAction",t.immediate?"pinch-zoom":""),this.callBase(t)},allowInterruptionByMouseWheel:function(){return 2!==this._stage},getDirection:function(){return this.direction},_cancel:function(){this.callBase.apply(this,arguments),this._toggleGestureCover(!1),this._stage=0},start:function(t){t._needSkipEvent||m.needSkipEvent(t)?this._cancel(t):(this._startEvent=m.createEvent(t),this._startEventData=m.eventData(t),this._stage=1,this._init(t),this._setupImmediateTimer())},_setupImmediateTimer:function(){clearTimeout(this._immediateTimer),this._immediateAccepted=!1,this.immediate&&(this._immediateTimer=setTimeout(function(){this._immediateAccepted=!0}.bind(this),180))},move:function(t){if(1===this._stage&&this._directionConfirmed(t)){if(this._stage=2,this._resetActiveElement(),this._toggleGestureCover(!0),this._clearSelection(t),this._adjustStartEvent(t),this._start(this._startEvent),0===this._stage)return;this._requestAccept(t),this._move(t),this._forgetAccept()}else 2===this._stage&&(this._clearSelection(t),this._move(t))},_directionConfirmed:function(t){var e=this._getTouchBoundary(t),i=m.eventDelta(this._startEventData,m.eventData(t)),s=f(i.x),n=f(i.y),r=this._validateMove(e,s,n),o=this._validateMove(e,n,s),a=this.getDirection(t),c,u,h;return"both"===a&&(r||o)||"horizontal"===a&&r||"vertical"===a&&o||this._immediateAccepted},_validateMove:function(t,e,i){return e&&e>=t&&(!this.immediate||e>=i)},_getTouchBoundary:function(t){return this.immediate||m.isDxMouseWheelEvent(t)?0:T},_adjustStartEvent:function(t){var e=this._getTouchBoundary(t),i=m.eventDelta(this._startEventData,m.eventData(t));this._startEvent.pageX+=g(i.x)*e,this._startEvent.pageY+=g(i.y)*e},_resetActiveElement:function(){"ios"===r.real().platform&&this.getElement().find(":focus").length&&c.resetActiveElement()},_toggleGestureCover:function(t){var e;2===this._stage&&x(t,this.getElement().css("cursor"))},_clearSelection:function(t){m.isDxMouseWheelEvent(t)||m.isTouchEvent(t)||c.clearSelection()},end:function(t){this._toggleGestureCover(!1),2===this._stage?this._end(t):1===this._stage&&this._stop(t),this._stage=0},dispose:function(){clearTimeout(this._immediateTimer),this.callBase.apply(this,arguments),this._toggleGestureCover(!1)},_init:_,_start:_,_move:_,_stop:_,_end:_});C.initialTouchBoundary=T,C.touchBoundary=function(t){if(!v(t))return T;T=t},i.exports=C}

