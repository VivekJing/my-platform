function module(e,t,a){"use strict";var l=e("../../core/renderer"),i=e("../../core/dom_adapter"),n=e("../../events/core/events_engine"),s=e("../../core/element_data"),o=e("../../core/utils/dom"),r=e("../widget/ui.widget"),d=e("../../core/utils/date"),c=e("../../core/utils/extend").extend,u=e("../../core/utils/common").noop,h=e("../../core/utils/date_serialization"),_=e("../../events/utils"),C=e("../../events/click"),D=r.abstract,f="dx-calendar-other-view",p="dx-calendar-cell",v="dx-calendar-empty-cell",g="dx-calendar-today",b="dx-calendar-selected-date",m="dx-calendar-contoured-date",x=_.addNamespace(C.name,"dxCalendar"),w="dxDateValueKey",y=r.inherit({_getViewName:function(){return"base"},_getDefaultOptions:function(){return c(this.callBase(),{date:new Date,focusStateEnabled:!1,cellTemplate:null,disabledDates:null,onCellClick:null,rowCount:3,colCount:4,allowValueSelection:!0})},_init:function(){this.callBase();var e=this.option("value");this.option("value",new Date(e)),this.option("value").valueOf()||this.option("value",new Date(0,0,0,0,0,0))},_initMarkup:function(){this.callBase(),this._renderImpl()},_renderImpl:function(){this._$table=l("<table>"),this.$element().append(this._$table),this._createDisabledDatesHandler(),this._renderBody(),this._renderContouredDate(),this._renderValue(),this._renderEvents()},_renderBody:function(){this.$body=l("<tbody>").appendTo(this._$table);var e=this,t=this.option("cellTemplate"),a=this.option("rtl")?function(e,t){e.insertBefore(t,e.firstChild)}:function(e,t){e.appendChild(t)};function n(n){r&&d.fixTimezoneGap(r,c),r=c;var u=i.createElement("td"),_=l(u),C=p;e._isTodayCell(c)&&(C=C+" "+g),(e._isDateOutOfRange(c)||e.isDateDisabled(c))&&(C=C+" "+v),e._isOtherView(c)&&(C=C+" "+f),u.className=C,u.setAttribute("data-value",h.serializeDate(c,d.getShortDateFormat())),s.data(u,w,c),e.setAria({role:"option",label:e.getCellAriaLabel(c)},_),a(D,u),t?t.render({model:{text:e._getCellText(c),date:c,view:e._getViewName()},container:o.getPublicElement(_),index:n}):u.innerHTML=e._getCellText(c),c=e._getNextCellData(c)}for(var r,c=this._getFirstCellData(),u=this.option("colCount"),_=0,C=this.option("rowCount");_<C;_++){var D=i.createElement("tr");this.$body.get(0).appendChild(D),this._iterateCells(u,n)}},_iterateCells:function(e,t){for(var a=0;a<e;)t(a),++a},_renderEvents:function(){this._createCellClickAction(),n.off(this._$table,x),n.on(this._$table,x,"td",function(e){l(e.currentTarget).hasClass(v)||this._cellClickAction({event:e,value:l(e.currentTarget).data(w)})}.bind(this))},_createCellClickAction:function(){this._cellClickAction=this._createActionByOption("onCellClick")},_createDisabledDatesHandler:function(){var e=this.option("disabledDates");this._disabledDatesHandler=Array.isArray(e)?this._getDefaultDisabledDatesHandler(e):e||u},_getDefaultDisabledDatesHandler:function(e){return u},_isTodayCell:D,_isDateOutOfRange:D,isDateDisabled:function(e){var t={date:e,view:this._getViewName()};return this._disabledDatesHandler(t)},_isOtherView:D,_getCellText:D,_getFirstCellData:D,_getNextCellData:D,_renderContouredDate:function(e){if(this.option("focusStateEnabled")){e=e||this.option("contouredDate");var t=this._$table.find(".dx-calendar-contoured-date"),a=this._getCellByDate(e);t.removeClass("dx-calendar-contoured-date"),a.addClass("dx-calendar-contoured-date")}},_dispose:function(){this._keyboardProcessor=void 0,this.callBase()},_changeValue:function(e){if(e){var t=this.option("value"),a=t?new Date(t):new Date;a.setDate(e.getDate()),a.setMonth(e.getMonth()),a.setFullYear(e.getFullYear()),a.setDate(e.getDate()),this.option("value",a)}else this.option("value",null)},_renderValue:function(){if(this.option("allowValueSelection")){var e=this.option("value"),t=this._getCellByDate(e);this._selectedCell&&this._selectedCell.removeClass("dx-calendar-selected-date"),t.addClass("dx-calendar-selected-date"),this._selectedCell=t}},getCellAriaLabel:function(e){return this._getCellText(e)},_getFirstAvailableDate:function(){var e=this.option("date"),t=this.option("min");return e=d.getFirstDateView(this._getViewName(),e),new Date(t&&e<t?t:e)},_getCellByDate:D,isBoundary:D,_optionChanged:function(e){var t;switch(e.name){case"value":this._renderValue();break;case"contouredDate":this._renderContouredDate(e.value);break;case"onCellClick":this._createCellClickAction();break;case"disabledDates":case"cellTemplate":this._invalidate();break;default:this.callBase(e)}}});a.exports=y}

