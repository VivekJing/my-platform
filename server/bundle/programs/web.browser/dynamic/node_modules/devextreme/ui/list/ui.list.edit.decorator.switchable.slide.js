function module(t){"use strict";var e=t("../../core/renderer"),i=t("../../events/core/events_engine"),n=t("../../core/utils/common").noop,s=t("../../events/click"),o=t("../../localization/message"),a=t("../../animation/translator"),h=t("../../events/utils"),d=t("../../events/core/emitter.feedback"),c=t("./ui.list.edit.decorator_menu_helper"),r=t("./ui.list.edit.decorator_registry").register,u=t("./ui.list.edit.decorator.switchable"),l=t("../../animation/fx"),_=t("../themes"),m=t("../action_sheet"),f="dxListEditDecorator",b=h.addNamespace(s.name,f),p=h.addNamespace(d.active,f),C="dx-list-slide-menu",g="dx-list-slide-menu-wrapper",v="dx-list-slide-menu-content",B="dx-list-slide-menu-buttons-container",$="dx-list-slide-menu-buttons",P="dx-list-slide-menu-button",W="dx-list-slide-menu-button-menu",D="dx-list-slide-menu-button-delete",x=400,y="cubic-bezier(0.075, 0.82, 0.165, 1)";r("menu","slide",u.inherit({_shouldHandleSwipe:!0,_init:function(){this.callBase.apply(this,arguments),this._$buttonsContainer=e("<div>").addClass(B),i.on(this._$buttonsContainer,p,n),this._$buttons=e("<div>").addClass($).appendTo(this._$buttonsContainer),this._renderMenu(),this._renderDeleteButton()},_renderMenu:function(){if(this._menuEnabled()){var t=this._menuItems();if(1===t.length){var i=t[0];this._renderMenuButton(i.text,function(t){t.stopPropagation(),this._fireAction(i)}.bind(this))}else{var n=e("<div>").addClass(C);this._menu=this._list._createComponent(n,m,{showTitle:!1,items:t,onItemClick:function(t){this._fireAction(t.itemData)}.bind(this),integrationOptions:{}}),n.appendTo(this._list.$element());var s=this._renderMenuButton(o.format("dxListEditDecorator-more"),function(t){t.stopPropagation(),this._menu.show()}.bind(this));this._menu.option("target",s)}}},_renderMenuButton:function(t,n){var s=e("<div>").addClass(P).addClass(W).text(t);return this._$buttons.append(s),i.on(s,b,n),s},_renderDeleteButton:function(){if(this._deleteEnabled()){var t=e("<div>").addClass(P).addClass(D).text(_.isMaterial()?"":o.format("dxListEditDecorator-delete"));i.on(t,b,function(t){t.stopPropagation(),this._deleteItem()}.bind(this)),this._$buttons.append(t)}},_fireAction:function(t){this._fireMenuAction(e(this._cachedNode),t.action),this._cancelDeleteReadyItem()},modifyElement:function(t){this.callBase.apply(this,arguments);var i=t.$itemElement;i.addClass(g);var n=e("<div>").addClass(v);i.wrapInner(n)},handleClick:function(t,i){return!!e(i.target).closest("."+v).length&&this.callBase.apply(this,arguments)},_swipeStartHandler:function(t){this._enablePositioning(t),this._cacheItemData(t),this._setPositions(this._getPositions(0))},_swipeUpdateHandler:function(t,e){var i,n=this._isRtlEnabled()?-1:1,s=this._isReadyToDelete(t),o;if(this._getCurrentPositions().content!==this._getStartPositions().content||s||!(e.offset*n>0)){var a=this._cachedItemWidth*e.offset,h=s?-this._cachedButtonWidth*n:0,d,c=(a+h)*n<0?Math.abs((a+h)/this._cachedButtonWidth):0;return this._setPositions(this._getPositions(c)),!0}e.cancel=!0},_getStartPositions:function(){var t=this._isRtlEnabled(),e=t?-1:1;return{content:0,buttonsContainer:t?-this._cachedButtonWidth:this._cachedItemWidth,buttons:-this._cachedButtonWidth*e}},_getPositions:function(t){var e,i=this._isRtlEnabled()?-1:1,n=this._getStartPositions();return{content:n.content-t*this._cachedButtonWidth*i,buttonsContainer:n.buttonsContainer-Math.min(t,1)*this._cachedButtonWidth*i,buttons:n.buttons+Math.min(t,1)*this._cachedButtonWidth*i}},_getDeleteButtonContainer:function(){return this._$buttonsContainer},_getCurrentPositions:function(){return{content:a.locate(this._$cachedContent).left,buttonsContainer:a.locate(this._$buttonsContainer).left,buttons:a.locate(this._$buttons).left}},_setPositions:function(t){a.move(this._$cachedContent,{left:t.content}),a.move(this._$buttonsContainer,{left:t.buttonsContainer}),a.move(this._$buttons,{left:t.buttons})},_cacheItemData:function(t){t[0]!==this._cachedNode&&(this._$cachedContent=t.find("."+v),this._cachedItemWidth=t.outerWidth(),this._cachedButtonWidth=this._cachedButtonWidth||this._$buttons.outerWidth(),this._$buttonsContainer.width(this._cachedButtonWidth),this._$cachedContent.length&&(this._cachedNode=t[0]))},_minButtonContainerLeftOffset:function(){return this._cachedItemWidth-this._cachedButtonWidth},_swipeEndHandler:function(t,e){this._cacheItemData(t);var i=this._isRtlEnabled()?1:-1,n=this._cachedItemWidth*e.offset,s=!this._isReadyToDelete(t)&&n*i>.2*this._cachedButtonWidth,o=e.targetOffset===i&&s;return this._toggleDeleteReady(t,o),!0},_enablePositioning:function(t){l.stop(this._$cachedContent,!0),this.callBase.apply(this,arguments),this._$buttonsContainer.appendTo(t)},_disablePositioning:function(){this.callBase.apply(this,arguments),this._$buttonsContainer.detach()},_animatePrepareDeleteReady:function(){return this._animateToPositions(this._getPositions(1))},_animateForgetDeleteReady:function(t){return this._cacheItemData(t),this._animateToPositions(this._getPositions(0))},_animateToPositions:function(t){var e=this,i=this._getCurrentPositions(),n=Math.min(Math.abs(i.content-t.content)/this._cachedButtonWidth,1);return l.animate(this._$cachedContent,{from:i,to:t,easing:y,duration:400*n,strategy:"frame",draw:function(t){e._setPositions(t)}})},dispose:function(){this._menu&&this._menu.$element().remove(),this._$buttonsContainer&&this._$buttonsContainer.remove(),this.callBase.apply(this,arguments)}}).include(c))}

