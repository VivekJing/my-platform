function module(t,i,e){"use strict";var o,n=b(t("../../core/renderer")),s,c=b(t("../../events/core/events_engine")),l,r=b(t("../../events/utils")),a=t("../../core/utils/common"),h=t("../../core/utils/iterator"),d,_=b(t("../../core/devices")),u,p=b(t("../../core/class")),f,S=b(t("./ui.scrollbar"));function b(t){return t&&t.__esModule?t:{default:t}}var m="dxNativeScrollable",v="dx-scrollable-native",g="dx-scrollable-scrollbar-simulated",$="dx-scrollable-scrollbars-hidden",B="vertical",w="horizontal",D=500,z=p.default.inherit({ctor:function(t){this._init(t)},_init:function(t){this._component=t,this._$element=t.$element(),this._$container=t._$container,this._$content=t._$content,this._direction=t.option("direction"),this._useSimulatedScrollbar=t.option("useSimulatedScrollbar"),this._showScrollbar=t.option("showScrollbar"),this.option=t.option.bind(t),this._createActionByOption=t._createActionByOption.bind(t),this._isLocked=t._isLocked.bind(t),this._isDirection=t._isDirection.bind(t),this._allowedDirection=t._allowedDirection.bind(t)},render:function(){this._renderPushBackOffset();var t,i=_.default.real().platform;this._$element.addClass("dx-scrollable-native").addClass("dx-scrollable-native-"+i).toggleClass($,!this._showScrollbar),this._showScrollbar&&this._useSimulatedScrollbar&&this._renderScrollbars()},updateBounds:a.noop,_renderPushBackOffset:function(){var t=this.option("pushBackValue");(t||this._component._lastPushBackValue)&&(this._$content.css({paddingTop:t,paddingBottom:t}),this._component._lastPushBackValue=t)},_renderScrollbars:function(){this._scrollbars={},this._hideScrollbarTimeout=0,this._$element.addClass(g),this._renderScrollbar(B),this._renderScrollbar(w)},_renderScrollbar:function(t){this._isDirection(t)&&(this._scrollbars[t]=new S.default((0,n.default)("<div>").appendTo(this._$element),{direction:t,expandable:this._component.option("scrollByThumb")}))},handleInit:a.noop,handleStart:function(){this._disablePushBack=!0},handleMove:function(t){this._isLocked()?t.cancel=!0:this._allowedDirection()&&(t.originalEvent.isScrollingEvent=!0)},handleEnd:function(){this._disablePushBack=!1},handleCancel:a.noop,handleStop:a.noop,_eachScrollbar:function(t){t=t.bind(this),(0,h.each)(this._scrollbars||{},(function(i,e){t(e,i)}))},createActions:function(){this._scrollAction=this._createActionByOption("onScroll"),this._updateAction=this._createActionByOption("onUpdated")},_createActionArgs:function(){var t=this.location();return{event:this._eventForUserAction,scrollOffset:{top:-t.top,left:-t.left},reachedLeft:this._isDirection(w)?t.left>=0:void 0,reachedRight:this._isDirection(w)?t.left<=this._containerSize.width-this._componentContentSize.width:void 0,reachedTop:this._isDirection(B)?t.top>=0:void 0,reachedBottom:this._isDirection(B)?t.top<=this._containerSize.height-this._componentContentSize.height:void 0}},handleScroll:function(t){this._isScrollLocationChanged()?(this._eventForUserAction=t,this._moveScrollbars(),this._scrollAction(this._createActionArgs()),this._lastLocation=this.location(),this._pushBackFromBoundary()):t.stopImmediatePropagation()},_pushBackFromBoundary:function(){var t=this.option("pushBackValue");if(t&&!this._disablePushBack){var i=this._containerSize.height-this._contentSize.height,e=this._$container.scrollTop(),o;e?i+e-2*t||this._$container.scrollTop(t-i):this._$container.scrollTop(t)}},_isScrollLocationChanged:function(){var t=this.location(),i=this._lastLocation||{},e=i.top!==t.top,o=i.left!==t.left;return e||o},_moveScrollbars:function(){this._eachScrollbar((function(t){t.moveTo(this.location()),t.option("visible",!0)})),this._hideScrollbars()},_hideScrollbars:function(){clearTimeout(this._hideScrollbarTimeout),this._hideScrollbarTimeout=setTimeout(function(){this._eachScrollbar((function(t){t.option("visible",!1)}))}.bind(this),500)},location:function(){return{left:-this._$container.scrollLeft(),top:this.option("pushBackValue")-this._$container.scrollTop()}},disabledChanged:a.noop,update:function(){this._update(),this._updateAction(this._createActionArgs())},_update:function(){this._updateDimensions(),this._updateScrollbars()},_updateDimensions:function(){this._containerSize={height:this._$container.height(),width:this._$container.width()},this._componentContentSize={height:this._component.$content().height(),width:this._component.$content().width()},this._contentSize={height:this._$content.height(),width:this._$content.width()},this._pushBackFromBoundary()},_updateScrollbars:function(){this._eachScrollbar((function(t,i){var e=i===B?"height":"width";t.option({containerSize:this._containerSize[e],contentSize:this._componentContentSize[e]}),t.update()}))},_allowedDirections:function(){return{vertical:this._isDirection(B)&&this._contentSize.height>this._containerSize.height,horizontal:this._isDirection(w)&&this._contentSize.width>this._containerSize.width}},dispose:function(){var t=this._$element.get(0).className,i=new RegExp("dx-scrollable-native\\S*","g");i.test(t)&&this._$element.removeClass(t.match(i).join(" ")),c.default.off(this._$element,".dxNativeScrollable"),c.default.off(this._$container,".dxNativeScrollable"),this._removeScrollbars(),clearTimeout(this._hideScrollbarTimeout)},_removeScrollbars:function(){this._eachScrollbar((function(t){t.$element().remove()}))},scrollBy:function(t){var i=this.location();this._$container.scrollTop(-i.top-t.top+this.option("pushBackValue")),this._$container.scrollLeft(-i.left-t.left)},validate:function(t){return!this.option("disabled")&&((!r.default.isDxMouseWheelEvent(t)||!this._isScrolledInMaxDirection(t))&&!!this._allowedDirection())},_isScrolledInMaxDirection:function(t){var i=this._$container.get(0),e=void 0;return e=t.delta>0?t.shiftKey?!i.scrollLeft:!i.scrollTop:t.shiftKey?i.clientWidth+i.scrollLeft>=i.scrollWidth:i.clientHeight+i.scrollTop>=i.scrollHeight},getDirection:function(){return this._allowedDirection()},verticalOffset:function(){return this.option("pushBackValue")}});e.exports=z}

