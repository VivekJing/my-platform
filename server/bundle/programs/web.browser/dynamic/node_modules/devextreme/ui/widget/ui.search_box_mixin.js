function module(e,t,a){"use strict";var r,i=_(e("../../core/renderer")),s=e("../../core/utils/extend"),n,o=_(e("../../localization/message")),h,c=_(e("../text_box")),l,d=_(e("../widget/ui.errors")),u=e("../../core/utils/deferred");function _(e){return e&&e.__esModule?e:{default:e}}a.exports={_getDefaultOptions:function(){return(0,s.extend)(this.callBase(),{searchMode:"",searchExpr:null,searchValue:"",searchEnabled:!1,searchEditorOptions:{}})},_initMarkup:function(){this._renderSearch(),this.callBase()},_renderSearch:function(){var e,t=this.$element(),a=this.option("searchEnabled"),r=this._addWidgetPrefix("search"),s=this._addWidgetPrefix("with-search");if(!a)return t.removeClass(s),void this._removeSearchBox();e=this._getSearchEditorOptions(),this._searchEditor?this._searchEditor.option(e):(t.addClass(s),this._$searchEditorElement=(0,i.default)("<div>").addClass(r).prependTo(t),this._searchEditor=this._createComponent(this._$searchEditorElement,c.default,e))},_removeSearchBox:function(){this._$searchEditorElement&&this._$searchEditorElement.remove(),delete this._$searchEditorElement,delete this._searchEditor},_getSearchEditorOptions:function(){var e=this,t=e.option("searchEditorOptions");return(0,s.extend)({mode:"search",placeholder:o.default.format("Search"),tabIndex:e.option("tabIndex"),value:e.option("searchValue"),valueChangeEvent:"input",onValueChanged:function(t){var a=e.option("searchTimeout");e._valueChangeDeferred=new u.Deferred,clearTimeout(e._valueChangeTimeout),e._valueChangeDeferred.done(function(){this.option("searchValue",t.value)}.bind(e)),t.event&&"input"===t.event.type&&a?e._valueChangeTimeout=setTimeout((function(){e._valueChangeDeferred.resolve()}),a):e._valueChangeDeferred.resolve()}},t)},_getAriaTarget:function(){return this.option("searchEnabled")?this._itemContainer(!0):this.$element()},_focusTarget:function(){return this.option("searchEnabled")?this._itemContainer(!0):this.callBase()},_updateFocusState:function(e,t){this.option("searchEnabled")&&this._toggleFocusClass(t,this.$element()),this.callBase(e,t)},getOperationBySearchMode:function(e){return"equals"===e?"=":e},_cleanAria:function(e){this.setAria({role:null,activedescendant:null},e),e.attr("tabIndex",null)},_optionChanged:function(e){switch(e.name){case"searchEnabled":case"searchEditorOptions":this._cleanAria(this.option("searchEnabled")?this.$element():this._itemContainer()),this._invalidate();break;case"searchExpr":case"searchMode":case"searchValue":if(!this._dataSource)return void d.default.log("W1009");"searchMode"===e.name?this._dataSource.searchOperation(this.getOperationBySearchMode(e.value)):this._dataSource[e.name](e.value),this._dataSource.load();break;case"searchTimeout":break;default:this.callBase(e)}},focus:function(){this.option("focusedElement")||!this.option("searchEnabled")?this.callBase():this._searchEditor&&this._searchEditor.focus()},_refresh:function(){this._valueChangeDeferred&&this._valueChangeDeferred.resolve(),this.callBase()}}}

