function module(e,t,i){"use strict";var n,s=f(e("../../core/renderer")),l=e("../../events/utils"),o=e("../../core/utils/extend"),r,d=f(e("./ui.list.edit.strategy.grouped")),a=e("../../localization/message"),c,u=f(e("./ui.list.edit.provider")),h,m=f(e("./ui.list.base"));function f(e){return e&&e.__esModule?e:{default:e}}var _="dx-list-item-selected",p="dx-list-item-response-wait",v=m.default.inherit({_supportedKeys:function(){var e=this,t=this.callBase(),i=function(t){e.option("allowItemDeleting")&&(t.preventDefault(),e.deleteItem(e.option("focusedElement")))},n=function(i){var n=e._editStrategy.getNormalizedIndex(e.option("focusedElement"));if(i.shiftKey&&e.option("allowItemReordering")){i.preventDefault();var s=e._editStrategy.getItemElement(n-1);e.reorderItem(e.option("focusedElement"),s),e.scrollToItem(e.option("focusedElement"))}else{if(0===n&&this._editProvider.handleKeyboardEvents(n,!1))return;this._editProvider.handleKeyboardEvents(n,!0),t.upArrow(i)}},s=function(i){var n=e._editStrategy.getNormalizedIndex(e.option("focusedElement")),s=n===this._getLastItemIndex();if(!s||!this._isDataSourceLoading())if(i.shiftKey&&e.option("allowItemReordering")){i.preventDefault();var l=e._editStrategy.getItemElement(n+1);e.reorderItem(e.option("focusedElement"),l),e.scrollToItem(e.option("focusedElement"))}else{if(s&&this._editProvider.handleKeyboardEvents(n,!1))return;this._editProvider.handleKeyboardEvents(n,!0),t.downArrow(i)}},l=function(e){this._editProvider.handleEnterPressing()||t.enter.apply(this,arguments)},r=function(e){this._editProvider.handleEnterPressing()||t.space.apply(this,arguments)};return(0,o.extend)({},t,{del:i,upArrow:n,downArrow:s,enter:l,space:r})},_updateSelection:function(){this._editProvider.afterItemsRendered(),this.callBase()},_getLastItemIndex:function(){return this._itemElements().length-1},_refreshItemElements:function(){this.callBase();var e=this._editProvider.getExcludedItemSelectors();e.length&&(this._itemElementsCache=this._itemElementsCache.not(e))},_getDefaultOptions:function(){return(0,o.extend)(this.callBase(),{showSelectionControls:!1,selectionMode:"none",selectAllMode:"page",onSelectAllValueChanged:null,selectAllText:(0,a.format)("dxList-selectAll"),menuItems:[],menuMode:"context",allowItemDeleting:!1,itemDeleteMode:"static",allowItemReordering:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(e){return"ios"===e.platform},options:{menuMode:"slide",itemDeleteMode:"slideItem"}},{device:{platform:"android"},options:{itemDeleteMode:"swipe"}},{device:{platform:"win"},options:{itemDeleteMode:"context"}}])},_init:function(){this.callBase(),this._initEditProvider()},_initDataSource:function(){this.callBase(),this._isPageSelectAll()||this._dataSource&&this._dataSource.requireTotalCount(!0)},_isPageSelectAll:function(){return"page"===this.option("selectAllMode")},_initEditProvider:function(){this._editProvider=new u.default(this)},_disposeEditProvider:function(){this._editProvider&&this._editProvider.dispose()},_refreshEditProvider:function(){this._disposeEditProvider(),this._initEditProvider()},_initEditStrategy:function(){this.option("grouped")?this._editStrategy=new d.default(this):this.callBase()},_initMarkup:function(){this._refreshEditProvider(),this.callBase()},_renderItems:function(){this.callBase.apply(this,arguments),this._editProvider.afterItemsRendered()},_selectedItemClass:function(){return"dx-list-item-selected"},_itemResponseWaitClass:function(){return"dx-list-item-response-wait"},_itemClickHandler:function(e){var t=(0,s.default)(e.currentTarget);if(!t.is(".dx-state-disabled, .dx-state-disabled *")){var i=this._editProvider.handleClick(t,e);i||this.callBase.apply(this,arguments)}},_shouldFireContextMenuEvent:function(){return this.callBase.apply(this,arguments)||this._editProvider.contextMenuHandlerExists()},_itemHoldHandler:function(e){var t=(0,s.default)(e.currentTarget);if(!t.is(".dx-state-disabled, .dx-state-disabled *")){var i=(0,l.isTouchEvent)(e)&&this._editProvider.handleContextMenu(t,e);i?e.handledByEditProvider=!0:this.callBase.apply(this,arguments)}},_itemContextMenuHandler:function(e){var t=(0,s.default)(e.currentTarget);if(!t.is(".dx-state-disabled, .dx-state-disabled *")){var i=!e.handledByEditProvider&&this._editProvider.handleContextMenu(t,e);i?e.preventDefault():this.callBase.apply(this,arguments)}},_postprocessRenderItem:function(e){this.callBase.apply(this,arguments),this._editProvider.modifyItemElement(e)},_clean:function(){this._disposeEditProvider(),this.callBase()},focusListItem:function(e){var t=this._editStrategy.getItemElement(e);this.option("focusedElement",t),this.focus(),this.scrollToItem(this.option("focusedElement"))},_optionChanged:function(e){switch(e.name){case"selectAllMode":this._initDataSource(),this._dataSource.pageIndex(0),this._dataSource.load();break;case"grouped":this._clearSelectedItems(),delete this._renderingGroupIndex,this._initEditStrategy(),this.callBase(e);break;case"showSelectionControls":case"menuItems":case"menuMode":case"allowItemDeleting":case"itemDeleteMode":case"allowItemReordering":case"selectAllText":this._invalidate();break;case"onSelectAllValueChanged":break;default:this.callBase(e)}},selectAll:function(){return this._selection.selectAll(this._isPageSelectAll())},unselectAll:function(){return this._selection.deselectAll(this._isPageSelectAll())},isSelectAll:function(){return this._selection.getSelectAllState(this._isPageSelectAll())},getFlatIndexByItemElement:function(e){return this._itemElements().index(e)},getItemElementByFlatIndex:function(e){var t=this._itemElements();return e<0||e>=t.length?(0,s.default)():t.eq(e)},getItemByIndex:function(e){return this._editStrategy.getItemDataByIndex(e)}});i.exports=v}

