function module(t,e,n){"use strict";var i=t("../core/renderer"),o=t("../events/core/events_engine"),a=t("../core/utils/icon"),s=t("../core/utils/dom"),c=t("../core/devices"),r=t("../core/component_registrator"),u=t("../core/utils/extend").extend,l=t("./validation/validation_mixin"),d=t("./validation_engine"),p=t("./widget/ui.widget"),h=t("./widget/utils.ink_ripple"),_=t("../events/utils"),m=t("./themes"),f=t("../events/click"),b=t("./widget/function_template"),v="dx-button",x="dx-button-content",g="dx-button-has-text",k="dx-button-has-icon",C="dx-button-mode-",y=["dx-button-mode-contained","dx-button-mode-text","dx-button-mode-outlined"],$="dx-template-wrapper",A="dx-button-text",B="content",S=100,T=p.inherit({_supportedKeys:function(){var t=this,e=function(e){e.preventDefault(),t._executeClickAction(e)};return u(this.callBase(),{space:e,enter:e})},_setDeprecatedOptions:function(){this.callBase()},_getDefaultOptions:function(){return u(this.callBase(),{hoverStateEnabled:!0,onClick:null,type:"normal",text:"",icon:"",validationGroup:void 0,activeStateEnabled:!0,template:"content",useSubmitBehavior:!1,useInkRipple:!1,stylingMode:"contained"})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===c.real().deviceType&&!c.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){var t=m.current();return m.isMaterial(t)||m.isAndroid5(t)},options:{useInkRipple:!0}}])},_getAnonymousTemplateName:function(){return"content"},_feedbackHideTimeout:100,_initTemplates:function(){this.callBase(),this._defaultTemplates.content=new b((function(t){var e=t.model,n=a.getImageContainer(e&&e.icon),o=e&&e.text?i("<span>").text(e.text).addClass("dx-button-text"):void 0;i(t.container).append(n).append(o)}),this)},_initMarkup:function(){this.$element().addClass("dx-button"),this._renderType(),this._renderStylingMode(),this.option("useInkRipple")&&this._renderInkRipple(),this._renderClick(),this.setAria("role","button"),this._updateAriaLabel(),this.callBase(),this._updateContent()},_renderInkRipple:function(){var t,e={};(!this.option("text")&&this.option("icon")||"back"===this.option("type"))&&u(e,{waveSizeCoefficient:1,useHoldAnimation:!1,isCentered:!0}),this._inkRipple=h.render(e)},_toggleActiveState:function(t,e,n){if(this.callBase.apply(this,arguments),this._inkRipple){var i={element:this._$content,event:n};e?this._inkRipple.showWave(i):this._inkRipple.hideWave(i)}},_updateContent:function(){var t=this.$element(),e=this._getContentData();this._$content?this._$content.empty():this._$content=i("<div>").addClass("dx-button-content").appendTo(t),t.toggleClass("dx-button-has-icon",!!e.icon).toggleClass("dx-button-has-text",!!e.text);var n=this._getAnonymousTemplateName()===this.option("template"),o=this._getTemplateByOption("template"),a=i(o.render({model:e,container:s.getPublicElement(this._$content),transclude:n}));a.hasClass("dx-template-wrapper")&&(this._$content.replaceWith(a),this._$content=a,this._$content.addClass("dx-button-content")),this.option("useSubmitBehavior")&&this._renderSubmitInput()},_renderSubmitInput:function(){var t=this._createAction((function(t){var e=t.event,n=d.getGroupConfig(t.component._findGroup());n&&!n.validate().isValid&&e.preventDefault(),e.stopPropagation()}));this._$submitInput=i("<input>").attr("type","submit").attr("tabindex",-1).addClass("dx-button-submit-input").appendTo(this._$content),o.on(this._$submitInput,"click",(function(e){t({event:e})}))},_getContentData:function(){var t=this.option("icon"),e=this.option("text"),n;return"back"===this.option("type")&&!t&&(t="back"),{icon:t,text:e}},_renderClick:function(){var t=this,e=_.addNamespace(f.name,this.NAME),n={};this.option("useSubmitBehavior")&&(n.afterExecute=function(t){setTimeout((function(){t.component._$submitInput.get(0).click()}))}),this._clickAction=this._createActionByOption("onClick",n),o.off(this.$element(),e),o.on(this.$element(),e,(function(e){t._executeClickAction(e)}))},_executeClickAction:function(t){this._clickAction({event:t,validationGroup:d.getGroupConfig(this._findGroup())})},_updateAriaLabel:function(){var t=this.option("icon"),e=this.option("text");"image"===a.getImageSourceType(t)&&(t=-1===t.indexOf("base64")?t.replace(/.+\/([^.]+)\..+$/,"$1"):"Base64");var n=e||t||"";n=n.toString().trim(),this.setAria("label",n)},_renderType:function(){var t=this.option("type");t&&this.$element().addClass("dx-button-"+t)},_renderStylingMode:function(){var t=this,e="stylingMode";y.forEach((function(e){return t.$element().removeClass(e)}));var n="dx-button-mode-"+this.option(e),i;-1===y.indexOf(n)&&(n="dx-button-mode-"+this._getDefaultOptions().stylingMode);this.$element().addClass(n)},_refreshType:function(t){var e=this.option("type");t&&this.$element().removeClass("dx-button-"+t).addClass("dx-button-"+e),this.$element().hasClass("dx-button-has-icon")||"back"!==e||this._updateContent()},_optionChanged:function(t){switch(t.name){case"onClick":this._renderClick();break;case"icon":case"text":this._updateContent(),this._updateAriaLabel();break;case"type":this._refreshType(t.previousValue),this._updateContent(),this._updateAriaLabel();break;case"template":this._updateContent();break;case"stylingMode":this._renderStylingMode();break;case"useInkRipple":case"useSubmitBehavior":this._invalidate();break;default:this.callBase(t)}},_clean:function(){delete this._inkRipple,this.callBase(),delete this._$content}}).include(l);r("dxButton",T),n.exports=T,n.exports.default=n.exports}

