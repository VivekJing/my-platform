function module(t,e,o){"use strict";var n,i=x(t("../../core/renderer")),a,r=x(t("../themes")),s,l=x(t("../../core/utils/common")),d=t("../../core/utils/type"),c,h=x(t("../../core/component_registrator")),u=t("../../core/utils/array"),m=t("../../core/utils/extend"),f=t("../../core/utils/iterator"),b,p=x(t("../collection/ui.collection_widget.async")),_,g=x(t("../widget/bindable_template"));function x(t){return t&&t.__esModule?t:{default:t}}var C="dx-toolbar",v="dx-toolbar-before",I="dx-toolbar-center",y="dx-toolbar-after",B="dx-toolbar-bottom",w="dx-toolbar-mini",$="dx-toolbar-item",S="dx-toolbar-label",M="dx-toolbar-button",T="dx-toolbar-items-container",W="dx-toolbar-group",L="dx-toolbar-compact",A=".dx-toolbar-label",O="text",R="default",k="dxToolbarItemDataKey",D=p.default.inherit({compactMode:!1,ctor:function(t,e){this._userOptions=e||{},this.callBase(t,e)},_getSynchronizableOptionsForCreateComponent:function(){return this.callBase().filter((function(t){return"disabled"!==t}))},_initTemplates:function(){this.callBase();var t=new g.default(function(t,e,o){(0,d.isPlainObject)(e)?(e.text&&t.text(e.text).wrapInner("<div>"),e.html&&t.html(e.html),"dxButton"===e.widget&&(this.option("useFlatButtons")&&(e.options=e.options||{},e.options.stylingMode=e.options.stylingMode||"text"),this.option("useDefaultButtons")&&(e.options=e.options||{},e.options.type=e.options.type||"default"))):t.text(String(e)),this._getTemplate("dx-polymorph-widget").render({container:t,model:o,parent:this})}.bind(this),["text","html","widget","options"],this.option("integrationOptions.watchMethod"));this._defaultTemplates.item=t,this._defaultTemplates.menuItem=t},_getDefaultOptions:function(){return(0,m.extend)(this.callBase(),{renderAs:"topToolbar",grouped:!1,useFlatButtons:!1,useDefaultButtons:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return r.default.isMaterial()},options:{useFlatButtons:!0}}])},_itemContainer:function(){return this._$toolbarItemsContainer.find([".dx-toolbar-before",".dx-toolbar-center",".dx-toolbar-after"].join(","))},_itemClass:function(){return"dx-toolbar-item"},_itemDataKey:function(){return k},_buttonClass:function(){return"dx-toolbar-button"},_dimensionChanged:function(){this._arrangeItems(),this._applyCompactMode()},_initMarkup:function(){this._renderToolbar(),this._renderSections(),this.callBase(),this.setAria("role","toolbar")},_render:function(){this.callBase(),this._renderItemsAsync()},_postProcessRenderItems:function(){this._arrangeItems()},_renderToolbar:function(){this.$element().addClass("dx-toolbar").toggleClass("dx-toolbar-bottom","bottomToolbar"===this.option("renderAs")),this._$toolbarItemsContainer=(0,i.default)("<div>").addClass("dx-toolbar-items-container").appendTo(this.$element())},_renderSections:function(){var t=this._$toolbarItemsContainer,e=this;(0,f.each)(["before","center","after"],(function(){var o="dx-toolbar-"+this,n=t.find("."+o);n.length||(e["_$"+this+"Section"]=n=(0,i.default)("<div>").addClass(o).appendTo(t))}))},_arrangeItems:function(t){t=t||this.$element().width(),this._$centerSection.css({margin:"0 auto",float:"none"});var e=this._$beforeSection.get(0).getBoundingClientRect(),o=this._$afterSection.get(0).getBoundingClientRect();this._alignCenterSection(e,o,t);var n=this._$toolbarItemsContainer.find(".dx-toolbar-label").eq(0),a=n.parent();if(n.length){var r=e.width?e.width:n.position().left,s=a.hasClass("dx-toolbar-before")?0:r,l=a.hasClass("dx-toolbar-after")?0:o.width,d=0;a.children().not(".dx-toolbar-label").each((function(){d+=(0,i.default)(this).outerWidth()}));var c=t-d,h=Math.max(c-s-l,0);if(a.hasClass("dx-toolbar-before"))this._alignSection(this._$beforeSection,h);else{var u=n.outerWidth()-n.width();n.css("maxWidth",h-u)}}},_alignCenterSection:function(t,e,o){this._alignSection(this._$centerSection,o-t.width-e.width);var n=this.option("rtlEnabled"),i=n?e:t,a=n?t:e,r=this._$centerSection.get(0).getBoundingClientRect();(i.right>r.left||r.right>a.left)&&this._$centerSection.css({marginLeft:i.width,marginRight:a.width,float:i.width>a.width?"none":"right"})},_alignSection:function(t,e){var o,n=t.find(".dx-toolbar-label").toArray();e-=this._getCurrentLabelsPaddings(n);var i=this._getCurrentLabelsWidth(n),a=Math.abs(i-e);e<i?(n=n.reverse(),this._alignSectionLabels(n,a,!1)):this._alignSectionLabels(n,a,!0)},_alignSectionLabels:function(t,e,o){for(var n=function(t){return t.getBoundingClientRect().width},a=0;a<t.length;a++){var r,s=(0,i.default)(t[a]),l=Math.ceil(n(t[a]));o&&s.css("maxWidth","inherit");var d=Math.ceil(o?n(t[a]):l);if(!(d<e)){r=o?l+e:l-e,s.css("maxWidth",r);break}r=o?d:0,e-=d,s.css("maxWidth",r)}},_applyCompactMode:function(){var t=this.$element();t.removeClass("dx-toolbar-compact"),this.option("compactMode")&&this._getSummaryItemsWidth(this.itemElements(),!0)>t.width()&&t.addClass("dx-toolbar-compact")},_getCurrentLabelsWidth:function(t){var e=0;return t.forEach((function(t,o){e+=(0,i.default)(t).outerWidth()})),e},_getCurrentLabelsPaddings:function(t){var e=0;return t.forEach((function(t,o){e+=(0,i.default)(t).outerWidth()-(0,i.default)(t).width()})),e},_renderItem:function(t,e,o,n){var i=e.location||"center",a=o||this["_$"+i+"Section"],r=!(!e.text&&!e.html),s=this.callBase(t,e,a,n);return s.toggleClass(this._buttonClass(),!r).toggleClass("dx-toolbar-label",r).addClass(e.cssClass),s},_renderGroupedItems:function(){var t=this;(0,f.each)(this.option("items"),(function(e,o){var n=o.items,a=(0,i.default)("<div>").addClass("dx-toolbar-group"),r=o.location||"center";n&&n.length&&((0,f.each)(n,(function(e,o){t._renderItem(e,o,a,null)})),t._$toolbarItemsContainer.find(".dx-toolbar-"+r).append(a))}))},_renderItems:function(t){var e;this.option("grouped")&&t.length&&t[0].items?this._renderGroupedItems():this.callBase(t)},_getToolbarItems:function(){return this.option("items")||[]},_renderContentImpl:function(){var t=this._getToolbarItems();this.$element().toggleClass("dx-toolbar-mini",0===t.length),this._renderedItemsCount?this._renderItems(t.slice(this._renderedItemsCount)):this._renderItems(t),this._applyCompactMode()},_renderEmptyMessage:l.default.noop,_clean:function(){this._$toolbarItemsContainer.children().empty(),this.$element().empty()},_visibilityChanged:function(t){t&&this._arrangeItems()},_isVisible:function(){return this.$element().width()>0&&this.$element().height()>0},_getIndexByItem:function(t){return(0,u.inArray)(t,this._getToolbarItems())},_itemOptionChanged:function(t,e,o){this.callBase.apply(this,[t,e,o]),this._arrangeItems()},_optionChanged:function(t){var e=t.name;switch(e){case"width":this.callBase.apply(this,arguments),this._dimensionChanged();break;case"renderAs":case"useFlatButtons":case"useDefaultButtons":this._invalidate();break;case"compactMode":this._applyCompactMode();break;case"grouped":break;default:this.callBase.apply(this,arguments)}}});(0,h.default)("dxToolbarBase",D),o.exports=D}

