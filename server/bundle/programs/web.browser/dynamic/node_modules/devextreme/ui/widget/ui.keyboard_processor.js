function module(t,e,s){"use strict";var i,o=_(t("../../core/renderer")),n,r=_(t("../../events/core/events_engine")),h,c=_(t("../../core/class")),a=t("../../core/utils/array"),l=t("../../core/utils/iterator"),d=t("../../events/utils");function _(t){return t&&t.__esModule?t:{default:t}}var u="compositionstart",m="compositionend",g="keydown",f="KeyboardProcessor",p=c.default.inherit({_keydown:(0,d.addNamespace)("keydown",f),_compositionStart:(0,d.addNamespace)("compositionstart",f),_compositionEnd:(0,d.addNamespace)("compositionend",f),ctor:function(t){var e=this;(t=t||{}).element&&(this._element=(0,o.default)(t.element)),t.focusTarget&&(this._focusTarget=t.focusTarget),this._handler=t.handler,this._context=t.context,this._childProcessors=[],this._element&&(this._processFunction=function(t){e.process(t)},this._toggleProcessingWithContext=this.toggleProcessing.bind(this),r.default.on(this._element,this._keydown,this._processFunction),r.default.on(this._element,this._compositionStart,this._toggleProcessingWithContext),r.default.on(this._element,this._compositionEnd,this._toggleProcessingWithContext))},dispose:function(){this._element&&(r.default.off(this._element,this._keydown,this._processFunction),r.default.off(this._element,this._compositionStart,this._toggleProcessingWithContext),r.default.off(this._element,this._compositionEnd,this._toggleProcessingWithContext)),this._element=void 0,this._handler=void 0,this._context=void 0,this._childProcessors=void 0},clearChildren:function(){this._childProcessors=[]},push:function(t){return this._childProcessors||this.clearChildren(),this._childProcessors.push(t),t},attachChildProcessor:function(){var t=new p;return this._childProcessors.push(t),t},reinitialize:function(t,e){return this._context=e,this._handler=t,this},process:function(t){var e=this._focusTarget&&this._focusTarget!==t.target&&(0,a.inArray)(t.target,this._focusTarget)<0,s=this._isComposingJustFinished&&229===t.which||this._isComposing||e;if(this._isComposingJustFinished=!1,s)return!1;var i={keyName:(0,d.normalizeKeyName)(t),key:t.key,code:t.code,ctrl:t.ctrlKey,location:t.location,metaKey:t.metaKey,shift:t.shiftKey,alt:t.altKey,which:t.which,originalEvent:t},o;this._handler&&this._handler.call(this._context,i)&&this._childProcessors&&(0,l.each)(this._childProcessors,(function(e,s){s.process(t)}))},toggleProcessing:function(t){var e=t.type;this._isComposing="compositionstart"===e,this._isComposingJustFinished=!this._isComposing}});s.exports=p}

