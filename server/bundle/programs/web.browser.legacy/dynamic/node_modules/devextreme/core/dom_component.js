function module(e,t,i){"use strict";var n,s=O(e("../core/renderer")),a,o=O(e("../events/core/events_engine")),l,r=O(e("../core/utils/window")),h=e("./utils/extend"),d,u=O(e("./config")),c,f=O(e("./errors")),_=e("../core/utils/dom"),m,p=O(e("../core/utils/resize_callbacks")),g,C=O(e("./utils/common")),b=e("./utils/iterator"),v=e("./utils/type"),y=e("./utils/array"),w,x=O(e("./utils/public_component")),R,E=O(e("./element_data")),V,$=O(e("./component"));function O(e){return e&&e.__esModule?e:{default:e}}var k=$.default.abstract,B="dx-rtl",A="dx-visibility-change-handler",D="VisibilityChange",z=$.default.inherit({_getDefaultOptions:function(){return(0,h.extend)(this.callBase(),{width:void 0,height:void 0,rtlEnabled:(0,u.default)().rtlEnabled,elementAttr:{},disabled:!1,integrationOptions:{}})},ctor:function(e,t){this._$element=(0,s.default)(e),x.default.attachInstanceToElement(this._$element,this,this._dispose),this.callBase(t)},_getSynchronizableOptionsForCreateComponent:function(){return["rtlEnabled","disabled","templatesRenderAsynchronously"]},_visibilityChanged:k,_dimensionChanged:k,_init:function(){this.callBase(),this._attachWindowResizeCallback()},_setOptionsByDevice:function(e){this.callBase([].concat(this.constructor._classCustomRules||[],e||[]))},_isInitialOptionValue:function(e){var t;return!(this.constructor._classCustomRules&&this._convertRulesToOptions(this.constructor._classCustomRules).hasOwnProperty(e))&&this.callBase(e)},_attachWindowResizeCallback:function(){if(this._isDimensionChangeSupported()){var e=this._windowResizeCallBack=this._dimensionChanged.bind(this);p.default.add(e)}},_isDimensionChangeSupported:function(){return this._dimensionChanged!==k},_renderComponent:function(){this._initMarkup(),r.default.hasWindow()&&this._render()},_initMarkup:function(){this._renderElementAttributes(),this._toggleRTLDirection(this.option("rtlEnabled")),this._renderVisibilityChange(),this._renderDimensions()},_render:function(){this._attachVisibilityChangeHandlers()},_renderElementAttributes:function(){var e=(0,h.extend)({},this.option("elementAttr")),t=e.class;delete e.class,this.$element().attr(e).addClass(t)},_renderVisibilityChange:function(){this._isDimensionChangeSupported()&&this._attachDimensionChangeHandlers(),this._isVisibilityChangeSupported()&&this.$element().addClass(A)},_renderDimensions:function(){var e=this.$element(),t=e.get(0),i=this._getOptionValue("width",t),n=this._getOptionValue("height",t);this._isCssUpdateRequired(t,n,i)&&e.css({width:i,height:n})},_isCssUpdateRequired:function(e,t,i){return!!(i||t||e.style.width||e.style.height)},_attachDimensionChangeHandlers:function(){var e=this,t="dxresize."+this.NAME+"VisibilityChange";o.default.off(e.$element(),t),o.default.on(e.$element(),t,(function(){e._dimensionChanged()}))},_attachVisibilityChangeHandlers:function(){if(this._isVisibilityChangeSupported()){var e=this,t="dxhiding."+this.NAME+"VisibilityChange",i="dxshown."+this.NAME+"VisibilityChange";e._isHidden=!e._isVisible(),o.default.off(e.$element(),t),o.default.on(e.$element(),t,(function(){e._checkVisibilityChanged("hiding")})),o.default.off(e.$element(),i),o.default.on(e.$element(),i,(function(){e._checkVisibilityChanged("shown")}))}},_isVisible:function(){return this.$element().is(":visible")},_checkVisibilityChanged:function(e){"hiding"===e&&this._isVisible()&&!this._isHidden?(this._visibilityChanged(!1),this._isHidden=!0):"shown"===e&&this._isVisible()&&this._isHidden&&(this._isHidden=!1,this._visibilityChanged(!0))},_isVisibilityChangeSupported:function(){return this._visibilityChanged!==k&&r.default.hasWindow()},_clean:C.default.noop,_modelByElement:function(){var e;return(this.option("modelByElement")||C.default.noop)(this.$element())},_invalidate:function(){if(!this._updateLockCount)throw f.default.Error("E0007");this._requireRefresh=!0},_refresh:function(){this._clean(),this._renderComponent()},_dispose:function(){this.callBase(),this._clean(),this._detachWindowResizeCallback()},_detachWindowResizeCallback:function(){this._isDimensionChangeSupported()&&p.default.remove(this._windowResizeCallBack)},_toggleRTLDirection:function(e){this.$element().toggleClass("dx-rtl",e)},_createComponent:function(e,t,i){var n=this,a=this;i=i||{};var o=C.default.grep(this._getSynchronizableOptionsForCreateComponent(),(function(e){return!(e in i)})),l=a.option("nestedComponentOptions")||C.default.noop,r=(0,h.extend)({integrationOptions:this.option("integrationOptions")},l(this)),d;if(o.forEach((function(e){r[e]=n.option(e)})),a._extendConfig(i,r),(0,v.isString)(t)){var u=(0,s.default)(e)[t](i);d=u[t]("instance")}else e&&((d=t.getInstance(e))?d.option(i):d=new t(e,i));if(d){var c=function(e){(0,y.inArray)(e.name,o)>=0&&d.option(e.name,e.value)};a.on("optionChanged",c),d.on("disposing",(function(){a.off("optionChanged",c)}))}return d},_extendConfig:function(e,t){(0,b.each)(t,(function(t,i){e[t]=e.hasOwnProperty(t)?e[t]:i}))},_defaultActionConfig:function(){return(0,h.extend)(this.callBase(),{context:this._modelByElement(this.$element())})},_defaultActionArgs:function(){var e=this._modelByElement(this.$element());return(0,h.extend)(this.callBase(),{element:this.element(),model:e})},_optionChanged:function(e){switch(e.name){case"width":case"height":this._renderDimensions();break;case"rtlEnabled":this._invalidate();break;case"elementAttr":this._renderElementAttributes();break;case"disabled":case"integrationOptions":break;default:this.callBase(e)}},_removeAttributes:function(e){for(var t=e.attributes.length-1;t>=0;t--){var i=e.attributes[t];if(!i)return;var n=i.name;0!==n.indexOf("aria-")&&-1===n.indexOf("dx-")&&"role"!==n&&"style"!==n&&"tabindex"!==n||e.removeAttribute(n)}},_removeClasses:function(e){var t=e.className.split(" ").filter((function(e){return 0!==e.lastIndexOf("dx-",0)}));e.className=t.join(" ")},endUpdate:function(){var e=!this._initializing&&!this._initialized;this.callBase.apply(this,arguments),this._updateLockCount||(e?this._renderComponent():this._requireRefresh&&(this._requireRefresh=!1,this._refresh()))},$element:function(){return this._$element},element:function(){return(0,_.getPublicElement)(this.$element())},dispose:function(){var e=this.$element().get(0);E.default.cleanDataRecursive(e,!0),e.textContent="",this._removeAttributes(e),this._removeClasses(e)}});z.getInstance=function(e){return x.default.getInstanceByElement((0,s.default)(e),this)},z.defaultOptions=function(e){this._classCustomRules=this._classCustomRules||[],this._classCustomRules.push(e)},i.exports=z,i.exports.default=i.exports}

