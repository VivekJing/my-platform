function module(e,i,t){"use strict";var n=e("../core/renderer"),r=e("./utils/window"),o=r.getNavigator(),s=r.getWindow(),a=e("./utils/extend").extend,c=e("./utils/type").isPlainObject,d=e("./utils/iterator").each,h=e("./class"),u=e("./errors"),p=e("./utils/callbacks"),l=e("./utils/resize_callbacks"),v=e("./events_mixin"),f=e("./utils/storage").sessionStorage,_=e("./utils/view_port"),w=e("./config"),m={iPhone:"iPhone",iPhone5:"iPhone",iPhone6:"iPhone",iPhone6plus:"iPhone",iPad:"iPad",iPadMini:"iPad Mini",androidPhone:"Android Mobile",androidTablet:"Android",win8:"MSAppHost",win8Phone:"Windows Phone 8.0",msSurface:"Windows ARM Tablet PC",desktop:"desktop",win10Phone:"Windows Phone 10.0",win10:"MSAppHost/3.0"},g={deviceType:"desktop",platform:"generic",version:[],phone:!1,tablet:!1,android:!1,ios:!1,win:!1,generic:!0,grade:"A",mac:!1},C={win:function(e){var i=/windows phone/i.test(e)||e.match(/WPDesktop/),t=!i&&/Windows(.*)arm(.*)Tablet PC/i.test(e),n=!i&&!t&&/msapphost/i.test(e);if(i||t||n){var r=e.match(/windows phone (\d+).(\d+)/i)||e.match(/windows nt (\d+).(\d+)/i),o=[];return r?o.push(parseInt(r[1],10),parseInt(r[2],10)):(r=e.match(/msapphost(\/(\d+).(\d+))?/i))&&o.push(3===parseInt(r[2],10)?10:8),{deviceType:i?"phone":t?"tablet":"desktop",platform:"win",version:o,grade:"A"}}},ios:function(e){if(/ip(hone|od|ad)/i.test(e)){var i=/ip(hone|od)/i.test(e),t=e.match(/os (\d+)_(\d+)_?(\d+)?/i),n,r,o;return{deviceType:i?"phone":"tablet",platform:"ios",version:t?[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)]:[],grade:480===s.screen.height?"B":"A"}}},android:function(e){if(/android|htc_|silk/i.test(e)){var i=/mobile/i.test(e),t=e.match(/android (\d+)\.(\d+)\.?(\d+)?/i),n=t?[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)]:[],r,o;return{deviceType:i?"phone":"tablet",platform:"android",version:n,grade:n.length>1&&(n[0]<4||4===n[0]&&n[1]<4)?"B":"A"}}}},P,b=new(h.inherit({ctor:function(e){this._window=e&&e.window||s,this._realDevice=this._getDevice(),this._currentDevice=void 0,this._currentOrientation=void 0,this.changed=p(),r.hasWindow()&&(this._recalculateOrientation(),l.add(this._recalculateOrientation.bind(this)))},current:function(e){if(e)return this._currentDevice=this._getDevice(e),this._forced=!0,void this.changed.fire();if(!this._currentDevice){e=void 0;try{e=this._getDeviceOrNameFromWindowScope()}catch(i){e=this._getDeviceNameFromSessionStorage()}finally{e||(e=this._getDeviceNameFromSessionStorage()),e&&(this._forced=!0)}this._currentDevice=this._getDevice(e)}return this._currentDevice},real:function(){return a({},this._realDevice)},orientation:function(){return this._currentOrientation},isForced:function(){return this._forced},isRippleEmulator:function(){return!!this._window.tinyHippos},_getCssClasses:function(e){var i=[],t=this._realDevice;return(e=e||this.current()).deviceType&&(i.push("dx-device-"+e.deviceType),"desktop"!==e.deviceType&&i.push("dx-device-mobile")),i.push("dx-device-"+t.platform),t.version&&t.version.length&&i.push("dx-device-"+t.platform+"-"+t.version[0]),b.isSimulator()&&i.push("dx-simulator"),w().rtlEnabled&&i.push("dx-rtl"),i},attachCssClasses:function(e,i){this._deviceClasses=this._getCssClasses(i).join(" "),n(e).addClass(this._deviceClasses)},detachCssClasses:function(e){n(e).removeClass(this._deviceClasses)},isSimulator:function(){try{return this._isSimulator||r.hasWindow()&&this._window.top!==this._window.self&&this._window.top["dx-force-device"]||this.isRippleEmulator()}catch(e){return!1}},forceSimulator:function(){this._isSimulator=!0},_getDevice:function(e){if("genericPhone"===e&&(e={deviceType:"phone",platform:"generic",generic:!0}),c(e))return this._fromConfig(e);var i;if(e){if(!(i=m[e]))throw u.Error("E0005")}else i=o.userAgent;return this._fromUA(i)},_getDeviceOrNameFromWindowScope:function(){var e;return r.hasWindow()&&(this._window.top["dx-force-device-object"]||this._window.top["dx-force-device"])&&(e=this._window.top["dx-force-device-object"]||this._window.top["dx-force-device"]),e},_getDeviceNameFromSessionStorage:function(){var e=f();if(e){var i=e.getItem("dx-force-device");try{return JSON.parse(i)}catch(t){return i}}},_fromConfig:function(e){var i=a({},g,this._currentDevice,e),t={phone:"phone"===i.deviceType,tablet:"tablet"===i.deviceType,android:"android"===i.platform,ios:"ios"===i.platform,win:"win"===i.platform,generic:"generic"===i.platform};return a(i,t)},_fromUA:function(e){var i;if(d(C,(function(t,n){return!(i=n(e))})),i)return this._fromConfig(i);var t=/(mac os)/.test(e.toLowerCase()),n=g;return n.mac=t,n},_changeOrientation:function(){var e=n(this._window),i=e.height()>e.width()?"portrait":"landscape";this._currentOrientation!==i&&(this._currentOrientation=i,this.fireEvent("orientationChanged",[{orientation:i}]))},_recalculateOrientation:function(){var e=n(this._window).width();this._currentWidth!==e&&(this._currentWidth=e,this._changeOrientation())}}).include(v));_.changeCallback.add((function(e,i){b.detachCssClasses(i),b.attachCssClasses(e)})),b.isForced()||"win"!==b.current().platform||b.current({version:[10]}),t.exports=b,t.exports.default=t.exports}

