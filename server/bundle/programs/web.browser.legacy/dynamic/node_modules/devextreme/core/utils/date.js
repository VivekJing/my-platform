function module(e,t,n){"use strict";var r=e("./type"),a=e("./math").adjust,u=e("./iterator").each,o=e("./inflector").camelize,i=r.isObject,s=r.isString,c=r.isDate,g=r.isDefined,l=["millisecond","second","minute","hour","day","week","month","quarter","year"],m=function e(t){switch(t){case"millisecond":return 1;case"second":return 1e3*e("millisecond");case"minute":return 60*e("second");case"hour":return 60*e("minute");case"day":return 24*e("hour");case"week":return 7*e("day");case"month":return 30*e("day");case"quarter":return 3*e("month");case"year":return 365*e("day");default:return 0}},d,h=function(e,t){var n;switch(w(e)){case"millisecond":return"second";case"second":return"minute";case"minute":return"hour";case"hour":return"day";case"day":return t?"week":"month";case"week":return"month";case"month":return"quarter";case"quarter":case"year":return"year";default:return 0}},D=function(e){var t,n,r,a=["millisecond","second","minute","hour","day","month","year"],u={};for(t=a.length-1;t>=0;t--)r=a[t],(n=Math.floor(e/m(r)))>0&&(u[r+"s"]=n,e-=y(r,n));return u},f=function(e){var t=0;return i(e)&&u(e,(function(e,n){t+=y(e.substr(0,e.length-1),n)})),s(e)&&(t=y(e,1)),t},y=function(e,t){return m(e)*t},w=function(e){var t,n=-1;return s(e)?e:i(e)?(u(e,(function(e,r){for(t=0;t<l.length;t++)r&&(e===l[t]+"s"||e===l[t])&&n<t&&(n=t)})),l[n]):""},M={millisecond:"millisecond",second:"longtime",minute:"shorttime",hour:"shorttime",day:"day",week:"day",month:"month",quarter:"quarter",year:"year"};function v(e){return M[w(e)]||""}var F=function(e){return Math.floor(e/3)},T=function(e){return 3*F(e)},Y=function(e,t,n,r){e=new Date(e.getTime());var a,u,o=new Date(e.getTime()),i=w(t);switch(i){case"second":e=new Date(1e3*Math.floor(o.getTime()/1e3));break;case"minute":e=new Date(6e4*Math.floor(o.getTime()/6e4));break;case"hour":e=new Date(36e5*Math.floor(o.getTime()/36e5));break;case"year":e.setMonth(0);case"month":e.setDate(1);case"day":e.setHours(0,0,0,0);break;case"week":(e=Z(e,r||0)).setHours(0,0,0,0);break;case"quarter":a=T(e.getMonth()),u=e.getMonth(),e.setDate(1),e.setHours(0,0,0,0),u!==a&&e.setMonth(a)}return n&&"hour"!==i&&"minute"!==i&&"second"!==i&&re(o,e),e},k,I,b=function(e,t){var n,r=0;return n={year:e.getFullYear()!==t.getFullYear(),month:e.getMonth()!==t.getMonth(),day:e.getDate()!==t.getDate(),hour:e.getHours()!==t.getHours(),minute:e.getMinutes()!==t.getMinutes(),second:e.getSeconds()!==t.getSeconds(),millisecond:e.getMilliseconds()!==t.getMilliseconds()},u(n,(function(e,t){t&&r++})),0===r&&0!==ue(e,t)&&(n.hour=!0,r++),n.count=r,n};function H(e,t,n){var a=new Date(e.getTime()),u=s(t)?j(t.toLowerCase()):r.isNumeric(t)?D(t):t;return u.years&&a.setFullYear(a.getFullYear()+u.years*n),u.quarters&&a.setMonth(a.getMonth()+3*u.quarters*n),u.months&&a.setMonth(a.getMonth()+u.months*n),u.weeks&&a.setDate(a.getDate()+7*u.weeks*n),u.days&&a.setDate(a.getDate()+u.days*n),u.hours&&a.setTime(a.getTime()+36e5*u.hours*n),u.minutes&&a.setTime(a.getTime()+6e4*u.minutes*n),u.seconds&&a.setTime(a.getTime()+1e3*u.seconds*n),u.milliseconds&&a.setTime(a.getTime()+u.milliseconds*n),a}var B=function(e,t,n){var r=n?-1:1;return c(e)?H(e,t,r):a(e+t*r,t)},q=function(e,t,n){var r,a=[];for(a.push(c(e)?new Date(e.getTime()):e),r=e;r<t;)r=B(r,n),a.push(r);return a},U=function(e,t){return"month"===e?new Date(t.getFullYear(),t.getMonth(),1):"year"===e?new Date(t.getFullYear(),0,t.getDate()):"decade"===e?new Date(J(t),t.getMonth(),t.getDate()):"century"===e?new Date(R(t),t.getMonth(),t.getDate()):void 0},p=function(e,t){return"month"===e?new Date(t.getFullYear(),t.getMonth(),V(t)):"year"===e?new Date(t.getFullYear(),11,t.getDate()):"decade"===e?new Date(J(t)+9,t.getMonth(),t.getDate()):"century"===e?new Date(R(t)+90,t.getMonth(),t.getDate()):void 0},z=function(e,t){var n=new Date(t.getFullYear(),t.getMonth(),1);return"month"===e?n:(n.setMonth(0),"year"===e?n:("decade"===e&&n.setFullYear(J(t)),"century"===e&&n.setFullYear(R(t)),n))},S=function(e,t){var n=new Date(t);return n.setDate(V(t)),"month"===e?n:(n.setMonth(11),n.setDate(V(n)),"year"===e?n:("decade"===e&&n.setFullYear(J(t)+9),"century"===e&&n.setFullYear(R(t)+99),n))},V=function(e){var t;return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},W,C,x,L,O,j=function(e){var t={};switch(e){case"year":t.years=1;break;case"month":t.months=1;break;case"quarter":t.months=3;break;case"week":t.weeks=1;break;case"day":t.days=1;break;case"hour":t.hours=1;break;case"minute":t.minutes=1;break;case"second":t.seconds=1;break;case"millisecond":t.milliseconds=1}return t},N=function(e,t){return Q(e,t)&&e.getDate()===t.getDate()},Q=function(e,t){return A(e,t)&&e.getMonth()===t.getMonth()},A=function(e,t){return e&&t&&e.getFullYear()===t.getFullYear()},E,G,R=function(e){return e&&e.getFullYear()-e.getFullYear()%100},J=function(e){return e&&e.getFullYear()-e.getFullYear()%10},K,P,X,Z=function(e,t){var n=(e.getDay()-t+7)%7,r=new Date(e);return r.setDate(e.getDate()-n),r},$,_=function(e,t,n,r){return"date"===r&&(t=t&&se.correctDateWithUnitBeginning(t,"day"),n=n&&se.correctDateWithUnitBeginning(n,"day"),e=e&&se.correctDateWithUnitBeginning(e,"day")),ne(e,t,n)===e},ee,te,ne=function(e,t,n){var r=e;return g(e)?(g(t)&&e<t&&(r=t),g(n)&&e>n&&(r=n),r):e},re=function(e,t){if(g(e)){var n,r,a=t.getHours()-e.getHours();0!==a&&(n=1===a||-23===a?-1:1,r=new Date(t.getTime()+36e5*n),(n>0||r.getDate()===t.getDate())&&t.setTime(r.getTime()))}},ae,ue=function(e,t){return 60*(t.getTimezoneOffset()-e.getTimezoneOffset())*1e3},oe,ie,se={dateUnitIntervals:l,convertMillisecondsToDateUnits:D,dateToMilliseconds:f,getNextDateUnit:h,convertDateUnitToMilliseconds:y,getDateUnitInterval:w,getDateFormatByTickInterval:v,getDatesDifferences:b,correctDateWithUnitBeginning:Y,trimTime:function(e){return se.correctDateWithUnitBeginning(e,"day")},setToDayEnd:function(e){var t=se.trimTime(e);return t.setDate(t.getDate()+1),new Date(t.getTime()-1)},dateTimeFromDecimal:function(e){var t,n;return{hours:Math.floor(e),minutes:e%1*60}},roundDateByStartDayHour:function(e,t){var n=this.dateTimeFromDecimal(t),r=new Date(e);return(e.getHours()===n.hours&&e.getMinutes()<n.minutes||e.getHours()<n.hours)&&r.setHours(n.hours,n.minutes,0,0),r},addDateInterval:H,addInterval:B,getSequenceByInterval:q,getDateIntervalByString:j,sameDate:N,sameMonthAndYear:Q,sameMonth:Q,sameYear:A,sameDecade:function(e,t){if(g(e)&&g(t)){var n=e.getFullYear()-e.getFullYear()%10,r=t.getFullYear()-t.getFullYear()%10;return e&&t&&n===r}},sameCentury:function(e,t){if(g(e)&&g(t)){var n=e.getFullYear()-e.getFullYear()%100,r=t.getFullYear()-t.getFullYear()%100;return e&&t&&n===r}},sameView:function(e,t,n){return se[o("same "+e)](t,n)},getDifferenceInMonth:function(e){var t=1;return"year"===e&&(t=12),"decade"===e&&(t=120),"century"===e&&(t=1200),t},getDifferenceInMonthForCells:function(e){var t=1;return"decade"===e&&(t=12),"century"===e&&(t=120),t},getFirstYearInDecade:J,getFirstDecadeInCentury:R,getShortDateFormat:function(){return"yyyy/MM/dd"},getViewFirstCellDate:U,getViewLastCellDate:p,getViewDown:function(e){switch(e){case"century":return"decade";case"decade":return"year";case"year":return"month"}},getViewUp:function(e){switch(e){case"month":return"year";case"year":return"decade";case"decade":return"century"}},getLastMonthDay:V,getLastMonthDate:function(e){var t;if(g(e))return new Date(e.getFullYear(),e.getMonth()+1,0)},getFirstMonthDate:function(e){var t;if(g(e))return new Date(e.getFullYear(),e.getMonth(),1)},getFirstWeekDate:Z,normalizeDateByWeek:function(e,t){var n=se.getDatesInterval(e,t,"day"),r=new Date(e);return n>=6&&(r=new Date(r.setDate(r.getDate()+7))),r},getQuarter:F,getFirstQuarterMonth:T,dateInRange:_,roundToHour:function(e){return e.setHours(e.getHours()+1),e.setMinutes(0),e},normalizeDate:ne,getViewMinBoundaryDate:z,getViewMaxBoundaryDate:S,fixTimezoneGap:re,getTimezonesDifference:ue,makeDate:function(e){return new Date(e)},getDatesInterval:function(e,t,n){var r=t.getTime()-e.getTime(),a=m(n)||1;return Math.floor(r/a)},getDatesOfInterval:function(e,t,n){var r=[],a=new Date(e.getTime());for(e.getTime()===t.getTime()&&r.push(new Date(e.getTime()));a<t;)r.push(new Date(a.getTime())),a=this.addInterval(a,n);return r}};n.exports=se}

