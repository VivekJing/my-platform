function module(r,e){"use strict";var n=r("../errors"),t=r("../../core/utils/deferred").when;function u(r){var e=[],u=!1;function o(){for(;e.length;){u=!0;var r,i=e.shift()();if(void 0!==i){if(i.then)return void t(i).always(o);throw n.Error("E0015")}}u=!1}function i(n,t){r?(e[0]&&t&&t(e[0]),e=[n]):e.push(n),u||o()}function f(){return u}return{add:i,busy:f}}e.create=u,e.enqueue=u().add}

