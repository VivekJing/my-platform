function module(a,e,t){"use strict";var d=a("./data/data_source/data_source").DataSource,o=a("./core/utils/extend").extend,r=a("./data/data_source/data_source").normalizeDataSourceOptions,i="_dataSourceOptions",n="_dataSourceChangedHandler",c="_dataSourceLoadErrorHandler",s="_dataSourceLoadingChangedHandler",u="_dataSourceFromUrlLoadMode",h="_getSpecificDataSourceOption",S={postCtor:function(){this.on("disposing",function(){this._disposeDataSource()}.bind(this))},_refreshDataSource:function(){this._initDataSource(),this._loadDataSource()},_initDataSource:function(){var a,e,t=h in this?this._getSpecificDataSourceOption():this.option("dataSource");this._disposeDataSource(),t&&(t instanceof d?(this._isSharedDataSource=!0,this._dataSource=t):(a="_dataSourceOptions"in this?this._dataSourceOptions():{},e=this._dataSourceType?this._dataSourceType():d,t=r(t,{fromUrlLoadMode:"_dataSourceFromUrlLoadMode"in this&&this._dataSourceFromUrlLoadMode()}),this._dataSource=new e(o(!0,{},a,t))),this._addDataSourceHandlers())},_addDataSourceHandlers:function(){n in this&&this._addDataSourceChangeHandler(),"_dataSourceLoadErrorHandler"in this&&this._addDataSourceLoadErrorHandler(),"_dataSourceLoadingChangedHandler"in this&&this._addDataSourceLoadingChangedHandler(),this._addReadyWatcher()},_addReadyWatcher:function(){this._dataSource.on("loadingChanged",function(a){this._ready&&this._ready(!a)}.bind(this))},_addDataSourceChangeHandler:function(){var a=this._dataSource;this._proxiedDataSourceChangedHandler=function(e){this._dataSourceChangedHandler(a.items(),e)}.bind(this),a.on("changed",this._proxiedDataSourceChangedHandler)},_addDataSourceLoadErrorHandler:function(){this._proxiedDataSourceLoadErrorHandler=this._dataSourceLoadErrorHandler.bind(this),this._dataSource.on("loadError",this._proxiedDataSourceLoadErrorHandler)},_addDataSourceLoadingChangedHandler:function(){this._proxiedDataSourceLoadingChangedHandler=this._dataSourceLoadingChangedHandler.bind(this),this._dataSource.on("loadingChanged",this._proxiedDataSourceLoadingChangedHandler)},_loadDataSource:function(){if(this._dataSource){var a=this._dataSource;a.isLoaded()?this._proxiedDataSourceChangedHandler&&this._proxiedDataSourceChangedHandler():a.load()}},_loadSingle:function(a,e){return a="this"===a?this._dataSource.key()||"this":a,this._dataSource.loadSingle(a,e)},_isLastPage:function(){return!this._dataSource||this._dataSource.isLastPage()||!this._dataSource._pageSize},_isDataSourceLoading:function(){return this._dataSource&&this._dataSource.isLoading()},_disposeDataSource:function(){this._dataSource&&(this._isSharedDataSource?(delete this._isSharedDataSource,this._proxiedDataSourceChangedHandler&&this._dataSource.off("changed",this._proxiedDataSourceChangedHandler),this._proxiedDataSourceLoadErrorHandler&&this._dataSource.off("loadError",this._proxiedDataSourceLoadErrorHandler),this._proxiedDataSourceLoadingChangedHandler&&this._dataSource.off("loadingChanged",this._proxiedDataSourceLoadingChangedHandler)):this._dataSource.dispose(),delete this._dataSource,delete this._proxiedDataSourceChangedHandler,delete this._proxiedDataSourceLoadErrorHandler,delete this._proxiedDataSourceLoadingChangedHandler)},getDataSource:function(){return this._dataSource||null}};t.exports=S}

