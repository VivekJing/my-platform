function module(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=e("./event_registrator_callbacks"),i=e("../../core/utils/extend").extend,a=e("../../core/dom_adapter"),l=e("../../core/utils/window"),c=l.getWindow(),u=e("../../core/utils/dependency_injector"),p=e("../../core/utils/type"),s=e("../../core/utils/callbacks"),f=p.isWindow,d=p.isFunction,v=p.isString,g=e("../../core/errors"),h=e("../../core/polyfills/weak_map"),y=e("../../events/core/hook_touch_props"),m=e("../../core/utils/call_once"),E="dxEmptyEventType",b={mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},w={focusin:"focus",focusout:"blur"},O=["blur","focusout","focus","focusin","load"],j=["touchmove","wheel","mousewheel"],H=function(e,t){return!f(e)&&"#document"!==e.nodeName&&a.elementMatches(e,t)},P=new h,x=0,S,T=(k={},r.add((function(e,t){k[e]=t})),{getField:function(e,t){return k[e]&&k[e][t]},callMethod:function(e,t,n,o){return k[e]&&k[e][t]&&k[e][t].apply(n,o)}}),k,M=function e(t,n){var o=t[0];if(o)if(a.isNode(o)||f(o))n.apply(q,t);else{if(v(o)||!("length"in o))throw g.Error("E0025");var r=Array.prototype.slice.call(t,0);Array.prototype.forEach.call(o,(function(t){r[0]=t,e(r,n)}))}},_=function(e){return function(){M(arguments,e)}},N,A=m((function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return e=!0,!0}});c.addEventListener("test",null,t)}catch(n){}return e})),D=function(e,t){var n=P.get(e),o=(t=t||"").split("."),r=o.slice(1),i=!!o[0];t=o[0]||E,n||(n={},P.set(e,n)),n[t]||(n[t]={handleObjects:[],nativeHandler:null});var l=n[t];return{addHandler:function(n,o,c){var u=function(o,r){var i,a,l=[o],u=o.currentTarget,p=o.relatedTarget;t in b&&(i=p&&u&&(p===u||u.contains(p))),void 0!==r&&l.push(r),T.callMethod(t,"handle",e,[o,c]),i||(a=n.apply(u,l)),!1===a&&(o.preventDefault(),o.stopPropagation())},p,s={handler:n,wrappedHandler:function(t,n){if(!S||t.type!==S)if(t.data=c,t.delegateTarget=e,o)for(var r=t.target;r&&r!==e;)H(r,o)&&(t.currentTarget=r,u(t,n)),r=r.parentNode;else u(t,n)},selector:o,type:t,data:c,namespace:r.join("."),namespaces:r,guid:++x};l.handleObjects.push(s);var f,d=1===l.handleObjects.length&&i,v;d&&(d=!T.callMethod(t,"setup",e,[c,r,n])),d&&(l.nativeHandler=F(t),A()&&j.indexOf(t)>-1&&(v={passive:!1}),l.removeListener=a.listen(e,b[t]||t,l.nativeHandler,v)),T.callMethod(t,"add",e,[s])},removeHandler:function(o,a){var l=function(t){var i=n[t],l,c,u;i.handleObjects.length?(i.handleObjects=i.handleObjects.filter((function(n){var i=r.length&&!I(n.namespaces,r)||o&&n.handler!==o||a&&n.selector!==a;return i||(l=n.handler,T.callMethod(t,"remove",e,[n])),i})),!i.handleObjects.length&&t!==E&&(T.callMethod(t,"teardown",e,[r,l]),i.nativeHandler&&i.removeListener(),delete n[t])):delete n[t]},c;if(i)l(t);else for(var u in n)l(u);0===Object.keys(n).length&&P.delete(e)},callHandlers:function(e,t){var o=!1,i=function(n){o||r.length&&!I(n.namespaces,r)||(n.wrappedHandler(e,t),o=e.isImmediatePropagationStopped())};l.handleObjects.forEach(i),r.length&&n.dxEmptyEventType&&n.dxEmptyEventType.handleObjects.forEach(i)}}},F=function(e){return function(t,n){var o=D(this,e);t=q.Event(t),o.callHandlers(t,n)}},I=function(e,t){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])<0)return!1;return!0},C=function(e){return function(t,n,o,r,i){i||(i=r,r=void 0),"string"!=typeof o&&(r=o,o=void 0),i||"string"!=typeof n||(i=r||o,o=void 0,r=void 0),e(t,n,o,r,i)}},L=function(e){return function(t,n,o,r){"function"==typeof o&&(r=o,o=void 0),e(t,n,o,r)}},W=function(e){return function(t,n,o){"string"==typeof n&&(n={type:n}),n.target||(n.target=t),n.currentTarget=t,n.delegateTarget||(n.delegateTarget=t),!n.type&&n.originalEvent&&(n.type=n.originalEvent.type),e(t,n instanceof q.Event?n:q.Event(n),o)}},B=function(e){return function(t,n){if(!(this instanceof q.Event))return new q.Event(t,n);t||(t={}),"string"==typeof t&&(t={type:t}),n||(n={}),e.call(this,t,n)}},G=function(e){var t=function(t,n){if(n&&n.indexOf(" ")>-1){var o=Array.prototype.slice.call(arguments,0);n.split(" ").forEach((function(t){o[1]=t,e.apply(this,o)}))}else e.apply(this,arguments)};return function(e,n){if("object"===(void 0===n?"undefined":o(n))){var r=Array.prototype.slice.call(arguments,0);for(var i in n)r[1]=i,r[r.length-1]=n[i],t.apply(this,r)}else t.apply(this,arguments)}},X=function(e,t){var n=w[e]||e,o;(function(e,t){return"click"===e&&"a"===t.localName})(e,t)||d(t[n])&&(S=e,t[n](),S=void 0)},Y=function(e){var t=function(e){var t=/^(?:mouse|pointer|contextmenu|drag|drop)|click/;return!e.which&&void 0!==e.button&&t.test(e.type)},n,o;return function(e){return null==e.which&&0===e.type.indexOf("key")}(e)?null!=e.charCode?e.charCode:e.keyCode:t(e)?{1:1,2:3,3:1,4:2}[e.button]:e.which},q=u({on:_(C(G((function(e,t,n,o,r){var i;D(e,t).addHandler(r,n,o)})))),one:_(C((function(e,t,n,o,r){var i=function o(){q.off(e,t,n,o),r.apply(this,arguments)};q.on(e,t,n,o,i)}))),off:_(L(G((function(e,t,n,o){var r;D(e,t).removeHandler(o,n)})))),trigger:_(W((function(e,t,n){var o=t.type,r=D(e,t.type),a;if(T.callMethod(o,"trigger",e,[t,n]),r.callHandlers(t,n),!(T.getField(o,"noBubble")||t.isPropagationStopped()||-1!==O.indexOf(o))){var l=[],u;(function e(t){var n=t.parentNode;n&&(l.push(n),e(n))})(e),l.push(c);for(var p=0;l[p]&&!t.isPropagationStopped();){var s;D(l[p],t.type).callHandlers(i(t,{currentTarget:l[p]}),n),p++}}(e.nodeType||f(e))&&(T.callMethod(o,"_default",e,[t,n]),X(o,e))}))),triggerHandler:_(W((function(e,t,n){var o;D(e,t.type).callHandlers(t,n)})))}),z=function(e){e&&(q.Event=e,q.Event.prototype=e.prototype)};z(B((function(e,t){var n=this,o=!1,r=!1,a=!1;i(n,e),(e instanceof q.Event||l.hasWindow()&&e instanceof c.Event)&&(n.originalEvent=e,n.currentTarget=void 0),e instanceof q.Event||i(n,{isPropagationStopped:function(){return!!(o||n.originalEvent&&n.originalEvent.propagationStopped)},stopPropagation:function(){o=!0,n.originalEvent&&n.originalEvent.stopPropagation()},isImmediatePropagationStopped:function(){return r},stopImmediatePropagation:function(){this.stopPropagation(),r=!0,n.originalEvent&&n.originalEvent.stopImmediatePropagation()},isDefaultPrevented:function(){return!!(a||n.originalEvent&&n.originalEvent.defaultPrevented)},preventDefault:function(){a=!0,n.originalEvent&&n.originalEvent.preventDefault()}}),J("which",Y,n),0===e.type.indexOf("touch")&&(delete t.pageX,delete t.pageY),i(n,t),n.guid=++x})));var J=function(e,t,n){Object.defineProperty(n||q.Event.prototype,e,{enumerable:!0,configurable:!0,get:function(){return this.originalEvent&&t(this.originalEvent)},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})};y(J);var K=s(),Q=s();q.set=function(e){K.fire(),q.inject(e),z(e.Event),Q.fire()},q.subscribeGlobal=function(){M(arguments,C((function(){var e=arguments;q.on.apply(this,e),K.add((function(){var t=Array.prototype.slice.call(e,0);t.splice(3,1),q.off.apply(this,t)})),Q.add((function(){q.on.apply(this,e)}))})))},q.forcePassiveFalseEventNames=j,q.passiveEventHandlersSupported=A,n.exports=q}

