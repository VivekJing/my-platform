function module(t,i,o){"use strict";var e=t("../core/renderer"),n=t("../core/utils/common"),r=t("../core/utils/iterator").each,a,c=t("../core/utils/window").getWindow(),l=t("../core/dom_adapter"),f=t("../core/utils/type").isWindow,s=t("../core/utils/extend").extend,u=t("../core/utils/browser"),h=t("./translator"),m=t("../core/utils/support"),v=/left|right/,p=/top|bottom/,g=/fit|flip|none/,d=u.safari,y=function(t){var i={h:"center",v:"center"},o=n.splitPair(t);return o&&r(o,(function(){var t=String(this).toLowerCase();v.test(t)?i.h=t:p.test(t)&&(i.v=t)})),i},L=function(t){return n.pairToObject(t)},z=function(t){var i=n.splitPair(t),o=String(i&&i[0]).toLowerCase(),e=String(i&&i[1]).toLowerCase();return g.test(o)||(o="none"),g.test(e)||(e=o),{h:o,v:e}},S=function(t){switch(t){case"center":return.5;case"right":case"bottom":return 1;default:return 0}},b=function(t){switch(t){case"left":return"right";case"right":return"left";case"top":return"bottom";case"bottom":return"top";default:return t}},w=function(t,i){var o=0;return t.myLocation<i.min&&(o+=i.min-t.myLocation),t.myLocation>i.max&&(o+=t.myLocation-i.max),o},A=function(t,i,o){return i.myLocation<o.min?"h"===t?"left":"top":i.myLocation>o.max?"h"===t?"right":"bottom":"none"},x=function(t){t.myLocation=t.atLocation+S(t.atAlign)*t.atSize-S(t.myAlign)*t.mySize+t.offset},W={fit:function(t,i){var o=!1;t.myLocation>i.max&&(t.myLocation=i.max,o=!0),t.myLocation<i.min&&(t.myLocation=i.min,o=!0),t.fit=o},flip:function(t,i){if(t.flip=!1,("center"!==t.myAlign||"center"!==t.atAlign)&&(t.myLocation<i.min||t.myLocation>i.max)){var o=s({},t,{myAlign:b(t.myAlign),atAlign:b(t.atAlign),offset:-t.offset});x(o),o.oversize=w(o,i),(o.myLocation>=i.min&&o.myLocation<=i.max||t.oversize>o.oversize)&&(t.myLocation=o.myLocation,t.oversize=o.oversize,t.flip=!0)}},flipfit:function(t,i){this.flip(t,i),this.fit(t,i)},none:function(t){t.oversize=0}},O,H=function(){var t=e("<div>").css({width:100,height:100,overflow:"scroll",position:"absolute",top:-9999}).appendTo(e("body")),i=t.get(0).offsetWidth-t.get(0).clientWidth;t.remove(),O=i},T={h:{location:0,flip:!1,fit:!1,oversize:0},v:{location:0,flip:!1,fit:!1,oversize:0}},C=function(t,i){var o=e(t),n=o.offset(),r=s(!0,{},T,{h:{location:n.left},v:{location:n.top}});if(!i)return r;var a=y(i.my),u=y(i.at),h=e(i.of).length&&i.of||c,v=L(i.offset),p=z(i.collision),g=i.boundary,S=L(i.boundaryOffset),b={mySize:o.outerWidth(),myAlign:a.h,atAlign:u.h,offset:v.h,collision:p.h,boundaryOffset:S.h},C={mySize:o.outerHeight(),myAlign:a.v,atAlign:u.v,offset:v.v,collision:p.v,boundaryOffset:S.v};if(h.preventDefault)b.atLocation=h.pageX,C.atLocation=h.pageY,b.atSize=0,C.atSize=0;else if(h=e(h),f(h[0]))b.atLocation=h.scrollLeft(),C.atLocation=h.scrollTop(),b.atSize=h[0].innerWidth>=h[0].outerWidth?h[0].innerWidth:h.width(),C.atSize=h[0].innerHeight>=h[0].outerHeight||d?h[0].innerHeight:h.height();else if(9===h[0].nodeType)b.atLocation=0,C.atLocation=0,b.atSize=h.width(),C.atSize=h.height();else{var P=h.offset();b.atLocation=P.left,C.atLocation=P.top,b.atSize=h.outerWidth(),C.atSize=h.outerHeight()}x(b),x(C);var X=function(){var t=e(c),i=t.width(),o=t.height(),n=t.scrollLeft(),r=t.scrollTop(),a=l.getDocumentElement(),f=m.touch?a.clientWidth/i:1,s=m.touch?a.clientHeight/o:1;void 0===O&&H();var u=i,h=o;if(g){var v=e(g),p=v.offset();n=p.left,r=p.top,u=v.width(),h=v.height()}return{h:{min:n+b.boundaryOffset,max:n+u/f-b.mySize-b.boundaryOffset},v:{min:r+C.boundaryOffset,max:r+h/s-C.mySize-C.boundaryOffset}}}();b.oversize=w(b,X.h),C.oversize=w(C,X.v),b.collisionSide=A("h",b,X.h),C.collisionSide=A("v",C,X.v),W[b.collision]&&W[b.collision](b,X.h),W[C.collision]&&W[C.collision](C,X.v);var Y=function(t){return i.precise?t:Math.round(t)};return s(!0,r,{h:{location:Y(b.myLocation),oversize:Y(b.oversize),fit:b.fit,flip:b.flip,collisionSide:b.collisionSide},v:{location:Y(C.myLocation),oversize:Y(C.oversize),fit:C.fit,flip:C.flip,collisionSide:C.collisionSide},precise:i.precise}),r},P=function(t,i){var o=e(t);if(!i)return o.offset();h.resetPosition(o,!0);var n=o.offset(),r=i.h&&i.v?i:C(o,i),a=function(t){return i.precise?t:Math.round(t)};return h.move(o,{left:r.h.location-a(n.left),top:r.v.location-a(n.top)}),r},X=function(t){return t=e(t).get(0),f(t)?null:t&&"pageY"in t&&"pageX"in t?{top:t.pageY,left:t.pageX}:e(t).offset()};P.inverseAlign||(P.inverseAlign=b),P.normalizeAlign||(P.normalizeAlign=y),o.exports={calculateScrollbarWidth:H,calculate:C,setup:P,offset:X}}

