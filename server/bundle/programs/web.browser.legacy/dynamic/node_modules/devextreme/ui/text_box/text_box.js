function module(t,e,n){"use strict";var r=t("../../core/renderer"),o=t("../../core/utils/window"),a=o.getWindow(),i=o.getNavigator(),s=t("../../core/utils/browser"),h=t("../../events/core/events_engine"),l=t("../../core/devices"),c=t("../../core/utils/array").inArray,d=t("../../core/utils/extend").extend,u=t("../../core/component_registrator"),g=t("./ui.text_editor"),_=t("../../events/utils"),x=i.userAgent,p=["backspace","tab","enter","pageUp","pageDown","end","home","leftArrow","rightArrow","downArrow","upArrow","del"],f="dx-textbox",m="dx-searchbox",C="dx-icon",v="dx-icon-search",w=g.inherit({ctor:function(t,e){e&&(this._showClearButton=e.showClearButton),this.callBase.apply(this,arguments)},_getDefaultOptions:function(){return d(this.callBase(),{value:"",mode:"text",maxLength:null})},_initMarkup:function(){this.$element().addClass("dx-textbox"),this.callBase(),this.setAria("role","textbox")},_renderContentImpl:function(){this._renderMaxLengthHandlers(),this.callBase()},_renderInputType:function(){this.callBase(),this._renderSearchMode()},_renderMaxLengthHandlers:function(){this._isAndroidOrIE()&&(h.on(this._input(),_.addNamespace("keydown",this.NAME),this._onKeyDownCutOffHandler.bind(this)),h.on(this._input(),_.addNamespace("change",this.NAME),this._onChangeCutOffHandler.bind(this)))},_renderProps:function(){this.callBase(),this._toggleMaxLengthProp()},_toggleMaxLengthProp:function(){var t=this._getMaxLength();t&&t>0?this._input().attr("maxLength",t):this._input().removeAttr("maxLength")},_renderSearchMode:function(){var t=this._$element;"search"===this.option("mode")?(t.addClass("dx-searchbox"),this._renderSearchIcon(),void 0===this._showClearButton&&(this._showClearButton=this.option("showClearButton"),this.option("showClearButton",!0))):(t.removeClass("dx-searchbox"),this._$searchIcon&&this._$searchIcon.remove(),this.option("showClearButton",void 0===this._showClearButton?this.option("showClearButton"):this._showClearButton),delete this._showClearButton)},_renderSearchIcon:function(){var t=r("<div>").addClass("dx-icon").addClass("dx-icon-search");t.prependTo(this._input().parent()),this._$searchIcon=t},_optionChanged:function(t){switch(t.name){case"maxLength":this._toggleMaxLengthProp(),this._renderMaxLengthHandlers();break;case"mask":this.callBase(t),this._toggleMaxLengthProp();break;default:this.callBase(t)}},_onKeyDownCutOffHandler:function(t){var e=this._getMaxLength();if(e){var n=r(t.target),o=_.normalizeKeyName(t);return this._cutOffExtraChar(n),n.val().length<e||-1!==c(o,p)||""!==a.getSelection().toString()}return!0},_onChangeCutOffHandler:function(t){var e=r(t.target);this.option("maxLength")&&this._cutOffExtraChar(e)},_cutOffExtraChar:function(t){var e=this._getMaxLength(),n=t.val();e&&n.length>e&&t.val(n.substr(0,e))},_getMaxLength:function(){var t;return!!this.option("mask")?null:this.option("maxLength")},_isAndroidOrIE:function(){var t=l.real(),e=t.version.join(".");return s.msie||"android"===t.platform&&e&&/^(2\.|4\.1)/.test(e)&&!/chrome/i.test(x)}});u("dxTextBox",w),n.exports=w}

