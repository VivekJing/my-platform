function module(t,e,r){"use strict";var n=t("../../core/class"),i=t("../../core/utils/extend").extend,s=t("../../core/utils/array").inArray,a=t("../../core/utils/type"),u=t("../../core/utils/common").noop,h=a.isFunction,l=" ",c=n.inherit({ctor:function(t){this._value=" ",i(this,t)},next:function(t){if(!arguments.length)return this._next;this._next=t},text:u,value:u,rawValue:u,handle:u,_prepareHandlingArgs:function(t,e){e=e||{};var r=t.hasOwnProperty("value")?"value":"text";return t[r]=a.isDefined(e.str)?e.str:t[r],t.start=a.isDefined(e.start)?e.start:t.start,t.length=a.isDefined(e.length)?e.length:t.length,t.index=t.index+1,t},reset:u,clear:u,first:function(t){return t=t||0,this.next().first(t+1)},isAccepted:function(){return!1},adjustedCaret:function(t,e,r){return e?this._adjustedForward(t,0,r):this._adjustedBackward(t,0,r)},_adjustedForward:u,_adjustedBackward:u,isValid:u}),d=c.inherit({next:u,handle:function(){return 0},text:function(){return""},value:function(){return""},first:function(){return 0},rawValue:function(){return""},adjustedCaret:function(){return 0},isValid:function(){return!0}}),o=c.inherit({text:function(){return(" "!==this._value?this._value:this.maskChar)+this.next().text()},value:function(){return this._value+this.next().value()},rawValue:function(){return this._value+this.next().rawValue()},handle:function(t){var e=t.hasOwnProperty("value")?t.value:t.text;if(!e||!e.length||!t.length)return 0;if(t.start)return this.next().handle(this._prepareHandlingArgs(t,{start:t.start-1}));var r=e[0],n=e.substring(1);return this._tryAcceptChar(r,t),this._accepted()?this.next().handle(this._prepareHandlingArgs(t,{str:n,length:t.length-1}))+1:this.handle(this._prepareHandlingArgs(t,{str:n,length:t.length-1}))},clear:function(t){this._tryAcceptChar(" ",t),this.next().clear(this._prepareHandlingArgs(t))},reset:function(){this._accepted(!1),this.next().reset()},_tryAcceptChar:function(t,e){if(this._accepted(!1),this._isAllowed(t,e)){var r=" "===t?this.maskChar:t;e.fullText=e.fullText.substring(0,e.index)+r+e.fullText.substring(e.index+1),this._accepted(!0),this._value=t}},_accepted:function(t){if(!arguments.length)return!!this._isAccepted;this._isAccepted=!!t},first:function(t){return" "===this._value?t||0:this.callBase(t)},_isAllowed:function(t,e){return" "===t||this._isValid(t,e)},_isValid:function(t,e){var r=this.allowedChars;return r instanceof RegExp?r.test(t):h(r)?r(t,e.index,e.fullText):Array.isArray(r)?s(t,r)>-1:r===t},isAccepted:function(t){return 0===t?this._accepted():this.next().isAccepted(t-1)},_adjustedForward:function(t,e,r){return e>=t?e:this.next()._adjustedForward(t,e+1,r)||e+1},_adjustedBackward:function(t,e){return e>=t-1?t:this.next()._adjustedBackward(t,e+1)||e+1},isValid:function(t){return this._isValid(this._value,t)&&this.next().isValid(this._prepareHandlingArgs(t))}}),f=o.inherit({value:function(){return this.next().value()},handle:function(t){var e=t.hasOwnProperty("value"),r=e?t.value:t.text;if(!r.length||!t.length)return 0;if(t.start||e)return this.next().handle(this._prepareHandlingArgs(t,{start:t.start&&t.start-1}));var n=r[0],i=r.substring(1);this._tryAcceptChar(n);var s=this._isAllowed(n)?this._prepareHandlingArgs(t,{str:i,length:t.length-1}):t;return this.next().handle(s)+1},clear:function(t){this._accepted(!1),this.next().clear(this._prepareHandlingArgs(t))},_tryAcceptChar:function(t){this._accepted(this._isValid(t))},_isValid:function(t){return t===this.maskChar},first:function(t){return t=t||0,this.next().first(t+1)},_adjustedForward:function(t,e,r){return e>=t&&r===this.maskChar?e:t===e+1&&this._accepted()?t:this.next()._adjustedForward(t,e+1,r)},_adjustedBackward:function(t,e){return e>=t-1?0:this.next()._adjustedBackward(t,e+1)},isValid:function(t){return this.next().isValid(this._prepareHandlingArgs(t))}});r.exports.MaskRule=o,r.exports.StubMaskRule=f,r.exports.EmptyMaskRule=d}

