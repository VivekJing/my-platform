function module(t,e,i){"use strict";var n=t("../../core/renderer"),a=t("../../core/utils/window").getWindow(),o=t("./ui.date_box.strategy.calendar"),s=t("./ui.time_view"),r=t("../../localization/date"),u=t("../../core/utils/extend").extend,h=t("../box"),d=t("./ui.date_utils"),l=573,c="dx-datebox-adaptivity-mode",p=o.inherit({NAME:"CalendarWithTime",getDefaultOptions:function(){return u(this.callBase(),{applyValueMode:"useButtons",buttonsLocation:"bottom after",showPopupTitle:!1})},getDisplayFormat:function(t){return t||"shortdateshorttime"},_is24HourFormat:function(){return r.is24HourFormat(this.getDisplayFormat(this.dateBox.option("displayFormat")))},_renderWidget:function(){this.callBase(),this._timeView=this.dateBox._createComponent(n("<div>"),s,{value:this.dateBoxValue(),_showClock:!this._isShrinkView(),use24HourFormat:this._is24HourFormat(),onValueChanged:this._valueChangedHandler.bind(this),stylingMode:this.dateBox.option("stylingMode")})},renderOpenedState:function(){this.callBase();var t=this._getPopup();t&&t._wrapper().toggleClass("dx-datebox-adaptivity-mode",this._isSmallScreen()),clearTimeout(this._repaintTimer),this._repaintTimer=setTimeout(function(){this._getPopup()&&this._getPopup().repaint()}.bind(this),0)},isAdaptivityChanged:function(){var t=this._isShrinkView(),e=this._currentAdaptiveMode;return t!==e?(this._currentAdaptiveMode=t,void 0!==e):this.callBase()},_updateValue:function(t){var e=this.dateBoxValue();e||t||(e=new Date,d.normalizeTime(e)),this.callBase(),this._timeView&&(e&&this._timeView.option("value",e),this._timeView.option("use24HourFormat",this._is24HourFormat()))},_isSmallScreen:function(){return n(a).width()<=573},_isShrinkView:function(){return!this.dateBox.option("showAnalogClock")||this.dateBox.option("adaptivityEnabled")&&this._isSmallScreen()},_getBoxItems:function(){var t=[{ratio:0,shrink:0,baseSize:"auto",name:"calendar"}];return this._isShrinkView()||t.push({ratio:0,shrink:0,baseSize:"auto",name:"time"}),t},renderPopupContent:function(){this.callBase(),this._currentAdaptiveMode=this._isShrinkView();var t=this._getPopup().$content();this._box=this.dateBox._createComponent(n("<div>").appendTo(t),h,{direction:"row",crossAlign:"start",items:this._getBoxItems(),itemTemplate:function(t){var e=n("<div>");switch(t.name){case"calendar":e.append(this._widget.$element()),this._isShrinkView()&&e.append(this._timeView.$element());break;case"time":e.append(this._timeView.$element())}return e}.bind(this)}),this._attachTabHandler()},popupConfig:function(t){var e=this.callBase(t),i;return u(e,{onShowing:function(){if("fallback"===this._box.option("_layoutStrategy")){var t=this._getPopup().$content().find(".dx-timeview-clock").css("minWidth");this._timeView.$element().css("maxWidth",t)}}.bind(this)})},getFirstPopupElement:function(){return this._timeView._hourBox.$element().find("input")},_attachTabHandler:function(){var t=this.dateBox,e=function(e){e.shiftKey&&(e.preventDefault(),t.focus())};this._timeView._hourBox.registerKeyHandler("tab",e)},_preventFocusOnPopup:function(t){n(t.target).hasClass("dx-texteditor-input")||(this.callBase.apply(this,arguments),this.dateBox._hasFocusClass()||this.dateBox.focus())},getValue:function(){var t=this._widget.option("value"),e=this._timeView.option("value");return(t=t?new Date(t):new Date).setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),t},dispose:function(){clearTimeout(this._removeMinWidthTimer),clearTimeout(this._repaintTimer),this.callBase()}});i.exports=p}

