function module(t,i,e){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=t("../core/renderer"),s=t("../core/utils/window"),r=s.getWindow(),a=t("../core/dom_adapter"),h=t("../events/core/events_engine"),l=t("../core/component_registrator"),p=t("../core/utils/common"),c=t("../core/utils/extend").extend,d=t("../animation/translator"),f=t("../animation/position"),u=t("../core/utils/type"),_=t("../core/utils/math"),v=t("../events/utils"),g=t("./popup"),m="dx-popover",w="dx-popover-wrapper",y="dx-popover-arrow",b="dx-popover-without-title",S={left:"right",top:"bottom",right:"left",bottom:"top",center:"center"},C={left:-1,top:-1,center:0,right:1,bottom:1},P={top:{my:"bottom center",at:"top center",collision:"fit flip"},bottom:{my:"top center",at:"bottom center",collision:"fit flip"},right:{my:"left center",at:"right center",collision:"flip fit"},left:{my:"right center",at:"left center",collision:"flip fit"}},$={left:"borderLeftWidth",top:"borderTopWidth",right:"borderRightWidth",bottom:"borderBottomWidth"},O=function(t,i){var e=t.option(i);return x(e)},x=function(t){return u.isObject(t)?t.name:t},B=function(t,i){var e=t.option(i);return u.isObject(e)&&e.delay},E=function(t,i){var e,o,s,r,l=t.option("target"),p=O(t,i+"Event");p&&!t.option("disabled")&&(r=v.addNamespace(p,t.NAME),o=t._createAction(function(){e=B(t,i+"Event"),this._clearEventTimeout("hide"===i),e?this._timeouts[i]=setTimeout((function(){t[i]()}),e):t[i]()}.bind(t),{validatingTargetName:"target"}),s=function(t){o({event:t,target:n(t.currentTarget)})},l.jquery||l.nodeType||u.isWindow(l)?(t["_"+i+"EventHandler"]=void 0,h.on(l,r,s)):(t["_"+i+"EventHandler"]=s,h.on(a.getDocument(),r,l,s)))},z=function(t,i,e,o){var s=o||O(t,e+"Event");s&&(s=v.addNamespace(s,t.NAME),t["_"+e+"EventHandler"]?h.off(a.getDocument(),s,i,t["_"+e+"EventHandler"]):h.off(n(i),s))},T=g.inherit({_getDefaultOptions:function(){return c(this.callBase(),{target:r,shading:!1,position:"bottom",closeOnOutsideClick:!0,animation:{show:{type:"fade",from:0,to:1},hide:{type:"fade",to:0}},showTitle:!1,width:"auto",height:"auto",dragEnabled:!1,resizeEnabled:!1,fullScreen:!1,closeOnTargetScroll:!0,arrowPosition:"",arrowOffset:0,boundaryOffset:{h:10,v:10}})},_defaultOptionsRules:function(){return[{device:{platform:"ios"},options:{arrowPosition:{boundaryOffset:{h:20,v:-10},collision:"fit"}}},{device:function(){return!s.hasWindow()},options:{animation:null}}]},_init:function(){this.callBase(),this._renderArrow(),this._timeouts={},this.$element().addClass("dx-popover"),this._wrapper().addClass("dx-popover-wrapper")},_render:function(){this.callBase.apply(this,arguments),this._detachEvents(this.option("target")),this._attachEvents()},_detachEvents:function(t){z(this,t,"show"),z(this,t,"hide")},_attachEvents:function(){E(this,"show"),E(this,"hide")},_renderArrow:function(){this._$arrow=n("<div>").addClass("dx-popover-arrow").prependTo(this.overlayContent())},_documentDownHandler:function(t){return!this._isOutsideClick(t)||this.callBase(t)},_isOutsideClick:function(t){return!n(t.target).closest(this.option("target")).length},_animate:function(t){t&&t.to&&"object"===o(t.to)&&c(t.to,{position:this._getContainerPosition()}),this.callBase.apply(this,arguments)},_stopAnimation:function(){this.callBase.apply(this,arguments)},_renderTitle:function(){this._wrapper().toggleClass("dx-popover-without-title",!this.option("showTitle")),this.callBase()},_renderPosition:function(){this.callBase(),this._renderOverlayPosition()},_renderOverlayBoundaryOffset:p.noop,_renderOverlayPosition:function(){this._resetOverlayPosition(),this._updateContentSize();var t=this._getContainerPosition(),i=f.setup(this._$content,t),e=this._getSideByLocation(i),o;this._togglePositionClass("dx-position-"+e),this._toggleFlippedClass(i.h.flip,i.v.flip),(this._isHorizontalSide()||this._isVerticalSide())&&this._renderArrowPosition(e)},_resetOverlayPosition:function(){this._setContentHeight(!0),this._togglePositionClass("dx-position-"+this._positionSide),d.move(this._$content,{left:0,top:0}),this._$arrow.css({top:"auto",right:"auto",bottom:"auto",left:"auto"})},_updateContentSize:function(){if(this._$popupContent){var t=f.calculate(this._$content,this._getContainerPosition());if(t.h.oversize>0&&this._isHorizontalSide()&&!t.h.fit){var i=this._$content.width()-t.h.oversize;this._$content.width(i)}if(t.v.oversize>0&&this._isVerticalSide()&&!t.v.fit){var e=this._$content.height()-t.v.oversize,o=this._$popupContent.height()-t.v.oversize;this._$content.height(e),this._$popupContent.height(o)}}},_getContainerPosition:function(){var t=p.pairToObject(this._position.offset||""),i=t.h,e=t.v,o=this._isVerticalSide(),n=this._isHorizontalSide();if(o||n){var s,r,a,h,l=(this._isPopoverInside()?-1:1)*C[this._positionSide]*((o?this._$arrow.height():this._$arrow.width())-this._getContentBorderWidth(this._positionSide));o?e+=l:i+=l}return c({},this._position,{offset:i+" "+e})},_getContentBorderWidth:function(t){var i=this._$content.css($[t]);return parseInt(i)||0},_getSideByLocation:function(t){var i=t.v.flip,e=t.h.flip;return this._isVerticalSide()&&i||this._isHorizontalSide()&&e||this._isPopoverInside()?S[this._positionSide]:this._positionSide},_togglePositionClass:function(t){this._$wrapper.removeClass("dx-position-left dx-position-right dx-position-top dx-position-bottom").addClass(t)},_toggleFlippedClass:function(t,i){this._$wrapper.toggleClass("dx-popover-flipped-horizontal",t).toggleClass("dx-popover-flipped-vertical",i)},_renderArrowPosition:function(t){this._$arrow.css(S[t],-(this._isVerticalSide(t)?this._$arrow.height():this._$arrow.width()));var i=this._isVerticalSide(t)?"left":"top",e=this._isVerticalSide(t)?"outerWidth":"outerHeight",o=n(this._position.of),s=f.offset(o)||{top:0,left:0},r=f.offset(this._$content),a=this._$arrow[e](),h=r[i],l=this._$content[e](),p=s[i],c=o.get(0).preventDefault?0:o[e](),d=Math.max(h,p),u=Math.min(h+l,p+c),v;v="start"===this.option("arrowPosition")?d-h:"end"===this.option("arrowPosition")?u-h-a:(d+u)/2-h-a/2;var g=this._getContentBorderWidth(t),m=_.fitIntoRange(v-g+this.option("arrowOffset"),g,l-a-2*g);this._$arrow.css(i,m)},_isPopoverInside:function(){var t=this._transformStringPosition(this.option("position"),P),i=f.setup.normalizeAlign(t.my),e=f.setup.normalizeAlign(t.at);return i.h===e.h&&i.v===e.v},_setContentHeight:function(t){t&&this.callBase()},_renderShadingPosition:function(){this.option("shading")&&this._$wrapper.css({top:0,left:0})},_renderShadingDimensions:function(){this.option("shading")&&this._$wrapper.css({width:"100%",height:"100%"})},_normalizePosition:function(){var t=c({},this._transformStringPosition(this.option("position"),P));t.of||(t.of=this.option("target")),t.collision||(t.collision="flip"),t.boundaryOffset||(t.boundaryOffset=this.option("boundaryOffset")),this._positionSide=this._getDisplaySide(t),this._position=t},_getDisplaySide:function(t){var i=f.setup.normalizeAlign(t.my),e=f.setup.normalizeAlign(t.at),o=C[i.h]===C[e.h]&&C[i.v]===C[e.v]?-1:1,n,s;return Math.abs(C[i.h]-o*C[e.h])>Math.abs(C[i.v]-o*C[e.v])?e.h:e.v},_isVerticalSide:function(t){return"top"===(t=t||this._positionSide)||"bottom"===t},_isHorizontalSide:function(t){return"left"===(t=t||this._positionSide)||"right"===t},_clearEventTimeout:function(t){clearTimeout(this._timeouts[t?"show":"hide"])},_clean:function(){this._detachEvents(this.option("target")),this.callBase.apply(this,arguments)},_optionChanged:function(t){switch(t.name){case"showTitle":case"title":case"titleTemplate":this.callBase(t),this._renderGeometry();break;case"boundaryOffset":case"arrowPosition":case"arrowOffset":this._renderGeometry();break;case"fullScreen":t.value&&this.option("fullScreen",!1);break;case"target":t.previousValue&&this._detachEvents(t.previousValue),this.callBase(t);break;case"showEvent":case"hideEvent":var i=t.name.substring(0,4),e=x(t.previousValue);this.hide(),z(this,this.option("target"),i,e),E(this,i);break;case"visible":this._clearEventTimeout(t.value),this.callBase(t);break;default:this.callBase(t)}},show:function(t){return t&&this.option("target",t),this.callBase()}});l("dxPopover",T),e.exports=T,e.exports.default=e.exports}

