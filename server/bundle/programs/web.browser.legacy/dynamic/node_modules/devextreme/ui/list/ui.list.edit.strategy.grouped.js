function module(t,e,i){"use strict";var n=t("../../core/renderer"),r=t("../../core/utils/type").isNumeric,o=t("../../core/utils/iterator").each,u=t("../../data/store_helper").queryByOptions,s=t("../../data/query"),m=t("../collection/ui.collection_widget.edit.strategy.plain"),c="dx-list-item",g="dx-list-group",l=20,p=2303,d=function(t){return(t.group<<20)+t.item},a=function(t){return{group:t>>20,item:2303&t}},f=m.inherit({_groupElements:function(){return this._collectionWidget._itemContainer().find(".dx-list-group")},_groupItemElements:function(t){return t.find(".dx-list-item")},getIndexByItemData:function(t){var e=this._collectionWidget.option("items"),i=!1;return!!t&&(t.items&&t.items.length&&(t=t.items[0]),o(e,(function(e,n){return!!n.items&&(o(n.items,(function(n,r){return r!==t||(i={group:e,item:n},!1)})),!i&&void 0)})),i)},getItemDataByIndex:function(t){var e=this._collectionWidget.option("items");return r(t)?this.itemsGetter()[t]:t&&e[t.group]&&e[t.group].items[t.item]||null},itemsGetter:function(){for(var t=[],e=this._collectionWidget.option("items"),i=0;i<e.length;i++)e[i]&&e[i].items?t=t.concat(e[i].items):t.push(e[i]);return t},deleteItemAtIndex:function(t){var e=a(t),i;this._collectionWidget.option("items")[e.group].items.splice(e.item,1)},getKeysByItems:function(t){for(var e=[],i=0;i<t.length;i++)t[i]&&t[i].items?e=e.concat(t[i].items):e.push(t[i]);var n=[];for(i=0;i<e.length;i++)n.push(this._collectionWidget.keyOf(e[i]));return n},getIndexByKey:function(t,e){var i=e||this._collectionWidget.option("items"),n=-1,r=this;return o(i,(function(e,i){if(i.items){var u=r.getKeysByItems(i.items);return o(u,(function(i,o){if(r._equalKeys(o,t))return n={group:e,item:i},!1})),-1===n&&void 0}})),n},_getGroups:function(t){var e=this._collectionWidget.getDataSource(),i=e&&e.group();return i?u(s(t),{group:i}).toArray():this._collectionWidget.option("items")},getItemsByKeys:function(t,e){var i=[];return o(t,function(t,n){var r,u=function(t){var e=this.getIndexByKey(n,t),i=e&&t[e.group];if(i)return{groupKey:i.key,item:i.items[e.item]}}.bind(this)(this._getGroups(e));if(u){var s=u.groupKey,m=u.item,c;o(i,(function(t,e){if(e.key===s)return c=e,!1})),c||(c={key:s,items:[]},i.push(c)),c.items.push(m)}}.bind(this)),i},moveItemAtIndexToIndex:function(t,e){var i=this._collectionWidget.option("items"),n=a(t),r=a(e),o=i[n.group].items,u=i[r.group].items,s=o[n.item];o.splice(n.item,1),u.splice(r.item,0,s)},_isItemIndex:function(t){return t&&r(t.group)&&r(t.item)},_getNormalizedItemIndex:function(t){var e=n(t),i=e.closest(".dx-list-group");return i.length?d({group:this._groupElements().index(i),item:this._groupItemElements(i).index(e)}):-1},_normalizeItemIndex:function(t){return d(t)},_denormalizeItemIndex:function(t){return a(t)},_getItemByNormalizedIndex:function(t){var e=a(t),i=this._groupElements().eq(e.group);return this._groupItemElements(i).eq(e.item)},_itemsFromSameParent:function(t,e){return a(t).group===a(e).group}});i.exports=f}

