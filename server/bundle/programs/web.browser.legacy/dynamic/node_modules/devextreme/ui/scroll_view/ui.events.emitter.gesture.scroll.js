function module(e,t,i){"use strict";var s=e("../../events/core/events_engine"),n=e("../../core/class"),c=n.abstract,l=e("../../events/utils"),r=e("../../events/gesture/emitter.gesture"),o=e("../../events/core/emitter_registrator"),a=e("../../animation/frame"),h=e("../../core/devices").real(),_=e("../../core/utils/version").compare,v="dxscrollinit",d="dxscrollstart",u="dxscroll",f="dxscrollend",m="dxscrollstop",p="dxscrollcancel",x=n.inherit((D=l.addNamespace("scroll","dxScrollEmitter"),{ctor:function(e){this._element=e,this._locked=!1;var t=this;this._proxiedScroll=function(e){t._scroll(e)},s.on(this._element,D,this._proxiedScroll)},_scroll:c,check:function(e,t){this._locked&&t()},dispose:function(){s.off(this._element,D,this._proxiedScroll)}})),D,k=x.inherit({ctor:function(e,t){this.callBase(e),this._timeout=t},_scroll:function(){this._prepare(),this._forget()},_prepare:function(){this._timer&&this._clearTimer(),this._locked=!0},_clearTimer:function(){clearTimeout(this._timer),this._locked=!1,this._timer=null},_forget:function(){var e=this;this._timer=setTimeout((function(){e._clearTimer()}),this._timeout)},dispose:function(){this.callBase(),this._clearTimer()}}),E=k.inherit((g=400,{ctor:function(e){this.callBase(e,400),this._lastWheelDirection=null},check:function(e,t){this._checkDirectionChanged(e),this.callBase(e,t)},_checkDirectionChanged:function(e){if(l.isDxMouseWheelEvent(e)){var t=e.shiftKey||!1,i=null!==this._lastWheelDirection&&t!==this._lastWheelDirection;this._lastWheelDirection=t,this._locked=this._locked&&!i}else this._lastWheelDirection=null}})),g,B=k.inherit((F=400,{ctor:function(e){this.callBase(e,400)}})),F,y,L,w,T,W,A;y=h.ios&&_(h.version,[8])>=0,L=h.android&&_(h.version,[5])>=0,(y||L)&&(B=x.inherit({_scroll:function(){this._locked=!0;var e=this;a.cancelAnimationFrame(this._scrollFrame),this._scrollFrame=a.requestAnimationFrame((function(){e._locked=!1}))},check:function(e,t){a.cancelAnimationFrame(this._scrollFrame),a.cancelAnimationFrame(this._checkFrame);var i=this,s=this.callBase;this._checkFrame=a.requestAnimationFrame((function(){s.call(i,e,t),i._locked=!1}))},dispose:function(){this.callBase(),a.cancelAnimationFrame(this._scrollFrame),a.cancelAnimationFrame(this._checkFrame)}})),o({emitter:r.inherit((T=100,W=200,A=Math.round(1e3/60),{ctor:function(e){this.callBase.apply(this,arguments),this.direction="both",this._pointerLocker=new B(e),this._wheelLocker=new E(e)},validate:function(){return!0},configure:function(e){e.scrollTarget&&(this._pointerLocker.dispose(),this._wheelLocker.dispose(),this._pointerLocker=new B(e.scrollTarget),this._wheelLocker=new E(e.scrollTarget)),this.callBase(e)},_init:function(e){this._wheelLocker.check(e,function(){l.isDxMouseWheelEvent(e)&&this._accept(e)}.bind(this)),this._pointerLocker.check(e,function(){var t=this.isNative&&l.isMouseEvent(e);l.isDxMouseWheelEvent(e)||t||this._accept(e)}.bind(this)),this._fireEvent("dxscrollinit",e),this._prevEventData=l.eventData(e)},move:function(e){this.callBase.apply(this,arguments),e.isScrollingEvent=this.isNative||e.isScrollingEvent},_start:function(e){this._savedEventData=l.eventData(e),this._fireEvent("dxscrollstart",e),this._prevEventData=l.eventData(e)},_move:function(e){var t=l.eventData(e),i;this._fireEvent("dxscroll",e,{delta:l.eventDelta(this._prevEventData,t)}),l.eventDelta(this._savedEventData,t).time>200&&(this._savedEventData=this._prevEventData),this._prevEventData=l.eventData(e)},_end:function(e){var t=l.eventDelta(this._prevEventData,l.eventData(e)),i={x:0,y:0};if(!l.isDxMouseWheelEvent(e)&&t.time<100){var s=l.eventDelta(this._savedEventData,this._prevEventData),n=A/s.time;i={x:s.x*n,y:s.y*n}}this._fireEvent("dxscrollend",e,{velocity:i})},_stop:function(e){this._fireEvent("dxscrollstop",e)},cancel:function(e){this.callBase.apply(this,arguments),this._fireEvent("dxscrollcancel",e)},dispose:function(){this.callBase.apply(this,arguments),this._pointerLocker.dispose(),this._wheelLocker.dispose()},_clearSelection:function(){if(!this.isNative)return this.callBase.apply(this,arguments)},_toggleGestureCover:function(){if(!this.isNative)return this.callBase.apply(this,arguments)}})),events:["dxscrollinit","dxscrollstart","dxscroll","dxscrollend","dxscrollstop","dxscrollcancel"]}),i.exports={init:"dxscrollinit",start:"dxscrollstart",move:"dxscroll",end:"dxscrollend",stop:"dxscrollstop",cancel:"dxscrollcancel"}}

