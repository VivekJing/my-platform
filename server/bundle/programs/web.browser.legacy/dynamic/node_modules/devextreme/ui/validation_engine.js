function module(e,t,i){"use strict";var r=e("../core/class"),a=e("../core/utils/extend").extend,n=e("../core/utils/array").inArray,u=e("../core/utils/iterator").each,s=e("../core/events_mixin"),o=e("../core/errors"),l=e("../core/utils/common"),d=e("../core/utils/type"),c=e("../localization/number"),v=e("../localization/message"),f=r.inherit({NAME:"base",defaultMessage:function(e){return v.getFormatter("validation-"+this.NAME)(e)},defaultFormattedMessage:function(e){return v.getFormatter("validation-"+this.NAME+"-formatted")(e)},_isValueEmpty:function(e){return!G.required.validate(e,{})},validate:function(e,t){var i=Array.isArray(e)?e:[e],r=!0;return i.length?i.every((function(e){return r=this._validate(e,t)}),this):r=this._validate(null,t),r}}),p=f.inherit({NAME:"required",_validate:function(e,t){return!!d.isDefined(e)&&(!1!==e&&(e=String(e),!t.trim&&d.isDefined(t.trim)||(e=e.trim()),""!==e))}}),g=f.inherit({NAME:"numeric",_validate:function(e,t){return!(!1===t.ignoreEmptyValue||!this._isValueEmpty(e))||(t.useCultureSettings&&d.isString(e)?!isNaN(c.parse(e)):d.isNumeric(e))}}),h=f.inherit({NAME:"range",_validate:function(e,t){if(!1!==t.ignoreEmptyValue&&this._isValueEmpty(e))return!0;var i=G.numeric.validate(e,t),r=d.isDefined(e)&&""!==e,a=i?parseFloat(e):r&&e.valueOf(),n=t.min,u=t.max;if(!i&&!d.isDate(e)&&!r)return!1;if(d.isDefined(n))return d.isDefined(u)?a>=n&&a<=u:a>=n;if(d.isDefined(u))return a<=u;throw o.Error("E0101")}}),m=f.inherit({NAME:"stringLength",_validate:function(e,t){return e=d.isDefined(e)?String(e):"",!t.trim&&d.isDefined(t.trim)||(e=e.trim()),!(!t.ignoreEmptyValue||!this._isValueEmpty(e))||G.range.validate(e.length,a({},t))}}),E=f.inherit({NAME:"custom",validate:function(e,t){if(t.ignoreEmptyValue&&this._isValueEmpty(e))return!0;var i=t.validator,r=i&&d.isFunction(i.option)&&i.option("dataGetter"),a=d.isFunction(r)&&r(),n={value:e,validator:i,rule:t};return a&&(n.data=a),t.validationCallback(n)}}),V=f.inherit({NAME:"compare",_validate:function(e,t){if(!t.comparisonTarget)throw o.Error("E0102");if(t.ignoreEmptyValue&&this._isValueEmpty(e))return!0;a(t,{reevaluate:!0});var i=t.comparisonTarget(),r;switch(t.comparisonType||"=="){case"==":return e==i;case"!=":return e!=i;case"===":return e===i;case"!==":return e!==i;case">":return e>i;case">=":return e>=i;case"<":return e<i;case"<=":return e<=i}}}),_=f.inherit({NAME:"pattern",_validate:function(e,t){if(!1!==t.ignoreEmptyValue&&this._isValueEmpty(e))return!0;var i=t.pattern;return d.isString(i)&&(i=new RegExp(i)),i.test(e)}}),y=f.inherit({NAME:"email",_validate:function(e,t){return!(!1===t.ignoreEmptyValue||!this._isValueEmpty(e))||G.pattern.validate(e,a({},t,{pattern:/^[\d\w._-]+@([\d\w._-]+\.)+[\w]+$/i}))}}),G={required:new p,numeric:new g,range:new h,stringLength:new m,custom:new E,compare:new V,pattern:new _,email:new y},w=r.inherit({ctor:function(e){this.group=e,this.validators=[]},validate:function(){var e={isValid:!0,brokenRules:[],validators:[]};return u(this.validators,(function(t,i){var r=i.validate();e.isValid=e.isValid&&r.isValid,r.brokenRule&&e.brokenRules.push(r.brokenRule),e.validators.push(i)})),this.fireEvent("validated",[{validators:e.validators,brokenRules:e.brokenRules,isValid:e.isValid}]),e},reset:function(){u(this.validators,(function(e,t){t.reset()}))}}).include(s),M={groups:[],getGroupConfig:function(e){var t=l.grep(this.groups,(function(t){return t.group===e}));if(t.length)return t[0]},initGroups:function(){this.groups=[],this.addGroup()},addGroup:function(e){var t=this.getGroupConfig(e);return t||(t=new w(e),this.groups.push(t)),t},removeGroup:function(e){var t=this.getGroupConfig(e),i=n(t,this.groups);return i>-1&&this.groups.splice(i,1),t},_setDefaultMessage:function(e,t,i){d.isDefined(e.message)||(t.defaultFormattedMessage&&d.isDefined(i)?e.message=t.defaultFormattedMessage(i):e.message=t.defaultMessage())},validate:function(e,t,i){var r={name:i,value:e,brokenRule:null,isValid:!0,validationRules:t},a=this;return u(t||[],(function(t,n){var u,s=G[n.type];if(!s)throw o.Error("E0100");return d.isDefined(n.isValid)&&n.value===e&&!n.reevaluate?!!n.isValid||(r.isValid=!1,r.brokenRule=n,!1):(n.value=e,u=s.validate(e,n),n.isValid=u,u||(r.isValid=!1,a._setDefaultMessage(n,s,i),r.brokenRule=n),!!n.isValid&&void 0)})),r},registerValidatorInGroup:function(e,t){var i=M.addGroup(e);n(t,i.validators)<0&&i.validators.push(t)},_shouldRemoveGroup:function(e,t){var i=void 0===e,r=e&&"dxValidationGroup"===e.NAME;return!i&&!r&&!t.length},removeRegisteredValidator:function(e,t){var i=M.getGroupConfig(e),r=i&&i.validators,a=n(t,r);a>-1&&(r.splice(a,1),this._shouldRemoveGroup(e,r)&&this.removeGroup(e))},validateGroup:function(e){var t=M.getGroupConfig(e);if(!t)throw o.Error("E0110");return t.validate()},resetGroup:function(e){var t=M.getGroupConfig(e);if(!t)throw o.Error("E0110");return t.reset()}};M.initGroups(),i.exports=M,i.exports.default=i.exports}

