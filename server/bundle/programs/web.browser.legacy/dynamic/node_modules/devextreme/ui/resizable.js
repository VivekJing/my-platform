function module(e,t,i){"use strict";var n=e("../core/renderer"),s=e("../events/core/events_engine"),r=e("../core/component_registrator"),o=e("../core/utils/common"),a=e("../core/utils/extend").extend,h=e("../core/utils/array").inArray,l=e("../core/utils/iterator").each,d=e("../core/utils/type"),c=e("../core/utils/window"),f=e("../animation/translator"),g=e("../core/utils/math").fitIntoRange,m=e("../core/dom_component"),_=e("../events/utils"),p=e("../events/drag"),u=d.isPlainObject,b=d.isFunction,x=e("../core/utils/dom"),v="dxResizable",z="dx-resizable",H="dx-resizable-resizing",S="dx-resizable-handle",W="dx-resizable-handle-top",A="dx-resizable-handle-bottom",O="dx-resizable-handle-left",w="dx-resizable-handle-right",y="dx-resizable-handle-corner",R=_.addNamespace(p.start,v),C=_.addNamespace(p.move,v),B=_.addNamespace(p.end,v),$={left:"borderLeftWidth",top:"borderTopWidth",right:"borderRightWidth",bottom:"borderBottomWidth"},E=m.inherit({_getDefaultOptions:function(){return a(this.callBase(),{handles:"all",step:"1",stepPrecision:"simple",area:void 0,minWidth:30,maxWidth:1/0,minHeight:30,maxHeight:1/0,onResizeStart:null,onResize:null,onResizeEnd:null,roundStepValue:!0})},_init:function(){this.callBase(),this.$element().addClass("dx-resizable")},_initMarkup:function(){this.callBase(),this._renderHandles()},_render:function(){this.callBase(),this._renderActions()},_renderActions:function(){this._resizeStartAction=this._createActionByOption("onResizeStart"),this._resizeEndAction=this._createActionByOption("onResizeEnd"),this._resizeAction=this._createActionByOption("onResize")},_renderHandles:function(){var e=this.option("handles");if("none"!==e){var t="all"===e?["top","bottom","left","right"]:e.split(" ");l(t,function(e,t){this._renderHandle(t)}.bind(this)),h("bottom",t)+1&&h("right",t)+1&&this._renderHandle("corner-bottom-right"),h("bottom",t)+1&&h("left",t)+1&&this._renderHandle("corner-bottom-left"),h("top",t)+1&&h("right",t)+1&&this._renderHandle("corner-top-right"),h("top",t)+1&&h("left",t)+1&&this._renderHandle("corner-top-left")}},_renderHandle:function(e){var t=this.$element(),i=n("<div>");i.addClass("dx-resizable-handle").addClass("dx-resizable-handle-"+e).appendTo(t),this._attachEventHandlers(i)},_attachEventHandlers:function(e){if(!this.option("disabled")){var t={};t[R]=this._dragStartHandler.bind(this),t[C]=this._dragHandler.bind(this),t[B]=this._dragEndHandler.bind(this),s.on(e,t,{direction:"both",immediate:!0})}},_dragStartHandler:function(e){var t=this.$element();if(t.is(".dx-state-disabled, .dx-state-disabled *"))e.cancel=!0;else{this._toggleResizingClass(!0),this._movingSides=this._getMovingSides(e),this._elementLocation=f.locate(t);var i=t.get(0).getBoundingClientRect();this._elementSize={width:i.width,height:i.height},this._renderDragOffsets(e),this._resizeStartAction({event:e,width:this._elementSize.width,height:this._elementSize.height,handles:this._movingSides}),e.targetElements=null}},_toggleResizingClass:function(e){this.$element().toggleClass("dx-resizable-resizing",e)},_renderDragOffsets:function(e){var t=this._getArea();if(t){var i=n(e.target).closest(".dx-resizable-handle"),s=i.outerWidth(),r=i.outerHeight(),o=i.offset(),a=t.offset,h=this._getAreaScrollOffset();e.maxLeftOffset=o.left-a.left-h.scrollX,e.maxRightOffset=a.left+t.width-o.left-s+h.scrollX,e.maxTopOffset=o.top-a.top-h.scrollY,e.maxBottomOffset=a.top+t.height-o.top-r+h.scrollY}},_getBorderWidth:function(e,t){if(d.isWindow(e.get(0)))return 0;var i=e.css($[t]);return parseInt(i)||0},_dragHandler:function(e){var t=this.$element(),i=this._movingSides,n=this._elementLocation,s=this._elementSize,r=this._getOffset(e),o=s.width+r.x*(i.left?-1:1),a=s.height+r.y*(i.top?-1:1);(r.x||"strict"===this.option("stepPrecision"))&&this._renderWidth(o),(r.y||"strict"===this.option("stepPrecision"))&&this._renderHeight(a);var h=t.get(0).getBoundingClientRect(),l=r.y-((h.height||a)-a),d=r.x-((h.width||o)-o);f.move(t,{top:n.top+(i.top?l:0),left:n.left+(i.left?d:0)}),this._resizeAction({event:e,width:this.option("width")||o,height:this.option("height")||a,handles:this._movingSides}),x.triggerResizeEvent(t)},_getOffset:function(e){var t=e.offset,i=o.pairToObject(this.option("step"),!this.option("roundStepValue")),n=this._getMovingSides(e),s="strict"===this.option("stepPrecision");return n.left||n.right||(t.x=0),n.top||n.bottom||(t.y=0),s?this._getStrictOffset(t,i,n):this._getSimpleOffset(t,i)},_getSimpleOffset:function(e,t){return{x:e.x-e.x%t.h,y:e.y-e.y%t.v}},_getStrictOffset:function(e,t,i){var n=this._elementLocation,s=this._elementSize,r=i.left?n.left:n.left+s.width,o=i.top?n.top:n.top+s.height,a=(r+e.x)%t.h,h=(o+e.y)%t.v,l=Math.sign||function(e){return 0===(e=+e)||isNaN(e)?e:e>0?1:-1},d=function(e,t){return(1+.2*l(t))%1*e},c=function(e,t){return Math.abs(e)<.2*t},f=e.x-a,g=e.y-h;return a>d(t.h,e.x)&&(f+=t.h),h>d(t.v,e.y)&&(g+=t.v),{x:!i.left&&!i.right||c(e.x,t.h)?0:f,y:!i.top&&!i.bottom||c(e.y,t.v)?0:g}},_getMovingSides:function(e){var t=n(e.target),i=t.hasClass("dx-resizable-handle-corner-top-left"),s=t.hasClass("dx-resizable-handle-corner-top-right"),r=t.hasClass("dx-resizable-handle-corner-bottom-left"),o=t.hasClass("dx-resizable-handle-corner-bottom-right");return{top:t.hasClass("dx-resizable-handle-top")||i||s,left:t.hasClass("dx-resizable-handle-left")||i||r,bottom:t.hasClass("dx-resizable-handle-bottom")||r||o,right:t.hasClass("dx-resizable-handle-right")||s||o}},_getArea:function(){var e=this.option("area");return b(e)&&(e=e.call(this)),u(e)?this._getAreaFromObject(e):this._getAreaFromElement(e)},_getAreaScrollOffset:function(){var e=this.option("area"),t,i={scrollY:0,scrollX:0};if(!b(e)&&!u(e)){var s=n(e)[0];d.isWindow(s)&&(i.scrollX=s.pageXOffset,i.scrollY=s.pageYOffset)}return i},_getAreaFromObject:function(e){var t={width:e.right-e.left,height:e.bottom-e.top,offset:{left:e.left,top:e.top}};return this._correctAreaGeometry(t),t},_getAreaFromElement:function(e){var t,i=n(e);return i.length&&(t={width:i.innerWidth(),height:i.innerHeight(),offset:a({top:0,left:0},d.isWindow(i[0])?{}:i.offset())},this._correctAreaGeometry(t,i)),t},_correctAreaGeometry:function(e,t){var i=t?this._getBorderWidth(t,"left"):0,n=t?this._getBorderWidth(t,"top"):0;e.offset.left+=i+this._getBorderWidth(this.$element(),"left"),e.offset.top+=n+this._getBorderWidth(this.$element(),"top"),e.width-=this.$element().outerWidth()-this.$element().innerWidth(),e.height-=this.$element().outerHeight()-this.$element().innerHeight()},_dragEndHandler:function(e){var t=this.$element();this._resizeEndAction({event:e,width:t.outerWidth(),height:t.outerHeight(),handles:this._movingSides}),this._toggleResizingClass(!1)},_renderWidth:function(e){this.option("width",g(e,this.option("minWidth"),this.option("maxWidth")))},_renderHeight:function(e){this.option("height",g(e,this.option("minHeight"),this.option("maxHeight")))},_optionChanged:function(e){switch(e.name){case"disabled":case"handles":this._invalidate();break;case"minWidth":case"maxWidth":c.hasWindow()&&this._renderWidth(this.$element().outerWidth());break;case"minHeight":case"maxHeight":c.hasWindow()&&this._renderHeight(this.$element().outerHeight());break;case"onResize":case"onResizeStart":case"onResizeEnd":this._renderActions();break;case"area":case"stepPrecision":case"step":case"roundStepValue":break;default:this.callBase(e)}},_clean:function(){this.$element().find(".dx-resizable-handle").remove()}});r(v,E),i.exports=E,i.exports.default=i.exports}

