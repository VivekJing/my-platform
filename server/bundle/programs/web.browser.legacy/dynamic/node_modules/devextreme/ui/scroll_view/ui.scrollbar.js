function module(t,i,e){"use strict";var n=t("../../core/renderer"),o=t("../../core/dom_adapter"),s=t("../../events/core/events_engine"),a=t("../../core/utils/ready_callbacks").add,l=t("../../animation/translator"),r=t("../widget/ui.widget"),c=t("../../events/utils"),h=t("../../core/utils/common"),d=t("../../core/utils/type").isPlainObject,u=t("../../core/utils/extend").extend,b=t("../../events/pointer"),_="dxScrollbar",p="dx-scrollable-scrollbar",f="dx-scrollable-scrollbar-active",v="dx-scrollable-scroll",m="dx-scrollable-scroll-content",x="dx-scrollbar-hoverable",S="horizontal",g=15,y="onScroll",$="onHover",C="always",M="never",H=r.inherit({_getDefaultOptions:function(){return u(this.callBase(),{direction:null,visible:!1,activeStateEnabled:!1,visibilityMode:y,containerSize:0,contentSize:0,expandable:!0,scaleRatio:1})},_init:function(){this.callBase(),this._isHovered=!1},_initMarkup:function(){this._renderThumb(),this.callBase()},_render:function(){this.callBase(),this._renderDirection(),this._update(),this._attachPointerDownHandler(),this.option("hoverStateEnabled",this._isHoverMode()),this.$element().toggleClass(x,this.option("hoverStateEnabled"))},_renderThumb:function(){this._$thumb=n("<div>").addClass("dx-scrollable-scroll"),n("<div>").addClass("dx-scrollable-scroll-content").appendTo(this._$thumb),this.$element().addClass("dx-scrollable-scrollbar").append(this._$thumb)},isThumb:function(t){return!!this.$element().find(t).length},_isHoverMode:function(){var t=this.option("visibilityMode");return(t===$||t===C)&&this.option("expandable")},_renderDirection:function(){var t=this.option("direction");this.$element().addClass("dx-scrollbar-"+t),this._dimension=t===S?"width":"height",this._prop=t===S?"left":"top"},_attachPointerDownHandler:function(){s.on(this._$thumb,c.addNamespace(b.down,_),this.feedbackOn.bind(this))},feedbackOn:function(){this.$element().addClass("dx-scrollable-scrollbar-active"),R=this},feedbackOff:function(){this.$element().removeClass("dx-scrollable-scrollbar-active"),R=null},cursorEnter:function(){this._isHovered=!0,this.option("visible",!0)},cursorLeave:function(){this._isHovered=!1,this.option("visible",!1)},_renderDimensions:function(){this._$thumb.css({width:this.option("width"),height:this.option("height")})},_toggleVisibility:function(t){this.option("visibilityMode")===y&&this._$thumb.css("opacity"),t=this._adjustVisibility(t),this.option().visible=t,this._$thumb.toggleClass("dx-state-invisible",!t)},_adjustVisibility:function(t){if(this.containerToContentRatio()&&!this._needScrollbar())return!1;switch(this.option("visibilityMode")){case y:break;case $:t=t||!!this._isHovered;break;case M:t=!1;break;case C:t=!0}return t},moveTo:function(t){if(!this._isHidden()){d(t)&&(t=t[this._prop]||0);var i={};i[this._prop]=this._calculateScrollBarPosition(t),l.move(this._$thumb,i)}},_calculateScrollBarPosition:function(t){return-t*this._thumbRatio},_update:function(){var t=Math.round(this.option("containerSize")),i=Math.round(this.option("contentSize"));this._containerToContentRatio=i?t/i:t;var e=Math.round(Math.max(Math.round(t*this._containerToContentRatio),15));this._thumbRatio=(t-e)/(this.option("scaleRatio")*(i-t)),this.option(this._dimension,e/this.option("scaleRatio")),this.$element().css("display",this._needScrollbar()?"":"none")},_isHidden:function(){return this.option("visibilityMode")===M},_needScrollbar:function(){return!this._isHidden()&&this._containerToContentRatio<1},containerToContentRatio:function(){return this._containerToContentRatio},_normalizeSize:function(t){return d(t)?t[this._dimension]||0:t},_clean:function(){this.callBase(),this===R&&(R=null),s.off(this._$thumb,"."+_)},_optionChanged:function(t){if(!this._isHidden())switch(t.name){case"containerSize":case"contentSize":this.option()[t.name]=this._normalizeSize(t.value),this._update();break;case"visibilityMode":case"direction":this._invalidate();break;case"scaleRatio":this._update();break;default:this.callBase.apply(this,arguments)}},update:h.deferRenderer((function(){this._adjustVisibility()&&this.option("visible",!0)}))}),R=null;a((function(){s.subscribeGlobal(o.getDocument(),c.addNamespace(b.up,_),(function(){R&&R.feedbackOff()}))})),e.exports=H}

