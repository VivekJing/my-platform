function module(e,r,t){"use strict";var n=e("../core/utils/common").grep,i=e("../core/utils/extend").extend,o=e("../core/utils/iterator").each,u=e("./array_query"),c=e("./utils").normalizeSortingInfo;function s(e,r){return e=e.groupBy(r[0].selector),r.length>1&&(e=e.select((function(e){return i({},e,{items:s(u(e.items),r.slice(1)).toArray()})}))),e}function l(e,r){var t=[];return o(e,(function(e,i){var o;n(r,(function(e){return i.selector===e.selector})).length<1&&t.push(i)})),t.concat(r)}function a(e,r,t){var n=(r=r||{}).filter;if(n&&(e=e.filter(n)),t)return e;var i=r.sort,u=r.select,a=r.group,f=r.skip,p=r.take;return a&&((a=c(a)).keepInitialKeyOrder=!!r.group.keepInitialKeyOrder),(i||a)&&(i=c(i||[]),a&&!a.keepInitialKeyOrder&&(i=l(a,i)),o(i,(function(r){e=e[r?"thenBy":"sortBy"](this.selector,this.desc,this.compare)}))),u&&(e=e.select(u)),a&&(e=s(e,a)),(p||f)&&(e=e.slice(f||0,p)),e}t.exports={multiLevelGroup:s,arrangeSortingInfo:l,queryByOptions:a}}

