function module(e,t,r){"use strict";var i=e("../core/renderer"),a=e("../core/utils/dependency_injector"),o=e("../core/utils/extend").extend,n=e("../core/utils/iterator").each,l=e("../core/utils/string").format,c=e("../core/utils/inflector").humanize,s=e("./core");e("./core");var u="-",f=o(!0,{},e("./default_messages")),d=e("./cldr-data/parentLocales"),g=function(e){var t=d[e];return t?"root"!==t&&t:e.substr(0,e.lastIndexOf("-"))},y=function(e,t){return e[t]||{}},_=function(e,t,r){for(var i,a=y(e,t)[r];!a&&!i;)(t=g(t))?a=y(e,t)[r]:i=!0;return a},h={},p=a({_dictionary:f,load:function(e){o(!0,this._dictionary,e)},_localizablePrefix:"@",setup:function(e){this._localizablePrefix=e},localizeString:function(e){var t=this,r=new RegExp("(^|[^a-zA-Z_0-9"+t._localizablePrefix+"-]+)("+t._localizablePrefix+"{1,2})([a-zA-Z_0-9-]+)","g"),i=t._localizablePrefix+t._localizablePrefix;return e.replace(r,(function(e,r,a,o){var n,l=t._localizablePrefix+o;return a!==i&&(n=t.format(o)),n||(h[o]=c(o)),r+(n||l)}))},_messageLoaded:function(e,t){return void 0!==_(this._dictionary,t||s.locale(),e)},localizeNode:function(e){var t=this;i(e).each((function(e,r){r.nodeType&&(3===r.nodeType?r.nodeValue=t.localizeString(r.nodeValue):i(r).is("iframe")||(n(r.attributes||[],(function(e,r){if("string"==typeof r.value){var i=t.localizeString(r.value);r.value!==i&&(r.value=i)}})),i(r).contents().each((function(e,r){t.localizeNode(r)}))))}))},getMessagesByLocales:function(){return this._dictionary},getDictionary:function(e){return e?h:o({},h,this.getMessagesByLocales()[s.locale()])},getFormatter:function(e){return this._getFormatterBase(e)||this._getFormatterBase(e,"en")},_getFormatterBase:function(e,t){var r=_(this._dictionary,t||s.locale(),e);if(r)return function(){var e=1===arguments.length&&Array.isArray(arguments[0])?arguments[0].slice(0):Array.prototype.slice.call(arguments,0);return e.unshift(r),l.apply(this,e)}},format:function(e){var t=this.getFormatter(e),r=Array.prototype.slice.call(arguments,1);return t&&t.apply(this,r)||""}});r.exports=p}

